(()=>{"use strict";var e=document.querySelector(".profile__edit-button"),t=document.querySelector(".popup_type_edit"),n=document.querySelector(".popup_type_add"),r=document.querySelector(".popup_type_image"),o=document.querySelector(".popup_type_avatar"),i=(document.querySelector(".element__template"),t.querySelector(".popup__button-closed"),n.querySelector(".popup__button-closed"),document.querySelectorAll(".popup__button-closed"),r.querySelector(".popup__button-closed"),document.querySelector(".popup__inputs_placed_profile"),document.querySelector(".popup__inputs_placed_elements")),u=(document.querySelector(".profile__name"),document.querySelector(".profile__occupation"),document.querySelector(".profile__avatar"),document.querySelector(".popup__item_type_avatar"),document.querySelector(".popup__item_type_name")),a=document.querySelector(".popup__item_type_about"),c=(i.querySelector(".popup__item_type_place"),i.querySelector(".popup__item_type_link"),document.querySelector(".profile__add-button")),l=(document.querySelector(".elements__list"),document.querySelector(".popup__image"),document.querySelector(".popup__caption"),Array.from(document.querySelectorAll(".popup")),document.querySelector(".profile__avatar-button")),s={formSelector:".popup__inputs",inputSelector:".popup__item",errorClassTemplate:".popup__item-error_type_",activeErrorClass:"popup__input-error",submitButtonSelector:".popup__button",validSubmitButtonClass:"popup__button_valid",errorClass:"popup__item-underline"};function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==f(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===f(o)?o:String(o)),r)}var o}var y=function(){function e(t,n,r){var o=t.data,i=t.handleCardClick,u=t.handleDeleteClick,a=t.handleLikeClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cardId=o._id,this._name=o.name,this._link=o.link,this._likes=o.likes,this._ownerId=o.owner._id,this._handleCardClick=i,this._handleLikeClick=a,this._handleDeleteClick=u,this.userId=n,this._templateSelector=r}var t,n;return t=e,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._templateSelector).content.querySelector(".element").cloneNode(!0)}},{key:"addLike",value:function(){this._buttonLike.classList.add("element__like-button_active")}},{key:"deleteLike",value:function(){this._buttonLike.classList.remove("element__like-button_active")}},{key:"setLike",value:function(e){this._counterLikes.textContent=e.likes.length,this._likes=e.likes}},{key:"_likeCard",value:function(){this.hasLiked}},{key:"hasLiked",value:function(){var e=this;return this._likes.some((function(t){return t._id===e.userId}))}},{key:"delete",value:function(){this._element.remove(),this._element=null}},{key:"_setEventListeners",value:function(){var e=this;this._buttonLike.addEventListener("click",(function(){e._handleLikeClick(e)})),this._buttonDelete.addEventListener("click",(function(){e._handleDeleteClick(e)})),this._cardImage.addEventListener("click",(function(){e._handleCardClick({name:e._name,link:e._link})}))}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._cardTitle=this._element.querySelector(".element__title"),this._cardTitle.textContent=this._name,this._cardImage=this._element.querySelector(".element__image"),this._cardImage.src=this._link,this._cardImage.alt="Фотография ".concat(this._name),this._buttonLike=this._element.querySelector(".element__like-button"),this._counterLikes=this._element.querySelector(".element__quantity-likes"),this._counterLikes.textContent=this._likes.length,this.hasLiked()&&this.addLike(),this._buttonDelete=this._element.querySelector(".element__delete-button"),this._ownerId!==this.userId&&this._buttonDelete.remove(),this._setEventListeners(),this._likeCard(),this._element}}])&&p(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==d(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===d(o)?o:String(o)),r)}var o}var m=function(){function e(t,n){var r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=r,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"renderItems",value:function(e){e.forEach(this._renderer)}},{key:"addItem",value:function(e){this._container.prepend(e)}}])&&h(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,S(r.key),r)}}function v(e,t,n){return(t=S(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S(e){var t=function(e,t){if("object"!==b(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===b(t)?t:String(t)}var g=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),v(this,"_showInputError",(function(e,t){var n=r._form.querySelector("".concat(r.config.errorClassTemplate).concat(e.name));e.classList.add(r.config.errorClass),n.textContent=t,n.classList.add(r.config.activeErrorClass)})),v(this,"_hideInputError",(function(e){var t=r._form.querySelector("".concat(r.config.errorClassTemplate).concat(e.name));e.classList.remove(r.config.errorClass),t.classList.remove(r.config.activeErrorClass),t.textContent=""})),v(this,"clearInputErrors",(function(){r._inputList.forEach((function(e){r._hideInputError(e)}))})),this.config=t,this._form=n,this._inputList=Array.from(this._form.querySelectorAll(this.config.inputSelector)),this._submitButton=this._form.querySelector(this.config.submitButtonSelector)}var t,n;return t=e,(n=[{key:"disableButton",value:function(){this._submitButton.classList.remove(this.config.validSubmitButtonClass),this._submitButton.disabled=!0}},{key:"_enableButton",value:function(){this._submitButton.classList.add(this.config.validSubmitButtonClass),this._submitButton.disabled=!1}},{key:"_checkInputValidation",value:function(e){e.validity.valid?(e.classList.remove(this.config.errorClass),this._hideInputError(e)):this._showInputError(e,e.validationMessage,this.config)}},{key:"_hasInvalidInput",value:function(){return Array.from(this._inputList).some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput(this._inputList)?this.disableButton():this._enableButton()}},{key:"_setEventListeners",value:function(){var e=this;this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidation(t),e._toggleButtonState()}))}))}},{key:"enableValidation",value:function(){var e=this;this._inputList.forEach((function(){e._setEventListeners(),e._form.addEventListener("reset",(function(){e.disableButton()}))}))}}])&&_(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,E(r.key),r)}}function E(e){var t=function(e,t){if("object"!==k(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===k(t)?t:String(t)}var L=function(){function e(t){var n,r,o,i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,o=function(e){"Escape"===e.key&&i.close()},(r=E(r="_handleEscClose"))in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,this._popup=document.querySelector(t)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),window.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),window.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){var e=this;this._popup.addEventListener("click",(function(t){(t.target.classList.contains("popup_opened")||t.target.classList.contains("popup__button-closed"))&&e.close()}))}}])&&w(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==j(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==j(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===j(o)?o:String(o)),r)}var o}function P(){return P="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=q(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},P.apply(this,arguments)}function C(e,t){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},C(e,t)}function q(e){return q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},q(e)}var I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=q(r);if(o){var n=q(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===j(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e))._imageElement=t._popup.querySelector(".popup__image"),t._imageCaption=t._popup.querySelector(".popup__caption"),t}return t=u,(n=[{key:"open",value:function(e){this._imageElement.src=e.link,this._imageElement.alt=e.name,this._imageCaption.textContent=e.name,P(q(u.prototype),"open",this).call(this)}}])&&O(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(L);function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==T(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==T(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===T(o)?o:String(o)),r)}var o}function B(){return B="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=U(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},B.apply(this,arguments)}function A(e,t){return A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},A(e,t)}function U(e){return U=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},U(e)}var x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=U(r);if(o){var n=U(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===T(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,e))._form=n._popup.querySelector(".popup__inputs"),n._handleFormSubmit=t,n._inputList=Array.from(n._popup.querySelectorAll(".popup__item")),n}return t=u,(n=[{key:"_getInputValues",value:function(){var e={};return this._inputList.forEach((function(t){var n=t.value,r=t.name;e[r]=n})),e}},{key:"handleLoading",value:function(){this._form.querySelector(".popup__button").textContent="Сохранение..."}},{key:"setEventListeners",value:function(){var e=this;B(U(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault();var n=e._getInputValues();e._handleFormSubmit(n)}))}},{key:"close",value:function(){this._form.reset(),B(U(u.prototype),"close",this).call(this)}}])&&R(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(L);function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==D(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==D(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===D(o)?o:String(o)),r)}var o}var V=function(){function e(t){var n=t.name,r=t.about,o=t.avatar;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._userNameElement=document.querySelector(n),this._userAboutMeElement=document.querySelector(r),this._avatar=document.querySelector(o)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._userNameElement.textContent,about:this._userAboutMeElement.textContent,avatar:this._avatar.src}}},{key:"setUserInfo",value:function(e){var t=e.name,n=e.about,r=e.avatar;this._userNameElement.textContent=t,this._userAboutMeElement.textContent=n,this._avatar.src=r}}])&&N(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function M(e){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M(e)}function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==M(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==M(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===M(o)?o:String(o)),r)}var o}function J(){return J="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=z(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},J.apply(this,arguments)}function H(e,t){return H=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},H(e,t)}function z(e){return z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},z(e)}var $=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&H(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=z(r);if(o){var n=z(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===M(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,e))._form=n._popup.querySelector(".popup__inputs"),n._cardId=t,n}return t=u,(n=[{key:"setSubmitAction",value:function(e){this._handleFormSubmit=e}},{key:"setEventListeners",value:function(){var e=this;J(z(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit()}))}}])&&F(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(L);function G(e){return G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},G(e)}function K(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==G(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==G(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===G(o)?o:String(o)),r)}var o}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var W,X=new(function(){function e(t){var n=t.baseUrl,r=t.headers;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseUrl=n,this._headers=r}var t,n;return t=e,(n=[{key:"_respond",value:function(e){return e.ok?e.json():Promise.reject("Ошибка ".concat(e.status))}},{key:"getUser",value:function(){var e=this;return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers}).then((function(t){return e._respond(t)}))}},{key:"getInitialCards",value:function(){var e=this;return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers}).then((function(t){return e._respond(t)}))}},{key:"editUserInfo",value:function(e,t){var n=this;return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e,about:t})}).then((function(e){return n._respond(e)}))}},{key:"addNewCard",value:function(e,t){var n=this;return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:e,link:t})}).then((function(e){return n._respond(e)}))}},{key:"deleteCard",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then((function(e){return t._respond(e)}))}},{key:"setLike",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/cards/").concat(e,"/likes"),{method:"PUT",headers:this._headers}).then((function(e){return t._respond(e)}))}},{key:"deleteLike",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/cards/").concat(e,"/likes"),{method:"DELETE",headers:this._headers}).then((function(e){return t._respond(e)}))}},{key:"changeAvatar",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then((function(e){return t._respond(e)}))}}])&&K(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}())({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-65",headers:{authorization:"6f02116a-e75d-4412-8aed-af12499c9bd8","Content-Type":"application/json"}});Promise.all([X.getUser(),X.getInitialCards()]).then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,u,a=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(l)throw o}}return a}}(t,n)||function(e,t){if(e){if("string"==typeof e)return Q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Q(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];W=o._id,ee.setUserInfo(o),ie.renderItems(i.reverse())})).catch((function(e){console.log("Ошибка ".concat(e.status))}));var Y=new I(".popup_type_image"),Z=new $(".popup_type_submit"),ee=new V({name:".profile__name",about:".profile__occupation",avatar:".profile__avatar"}),te=new x(".popup_type_avatar",(function(e){te.handleLoading(),X.changeAvatar(e.avatar).then((function(e){ee.setUserInfo(e),te.close()})).catch((function(e){console.log("Ошибка ".concat(e.status))})).finally((function(){te.handleLoading("Сохранить")}))})),ne=new x(".popup_type_edit",(function(e){ne.handleLoading(),X.editUserInfo(e.name,e.about).then((function(e){ee.setUserInfo(e),ne.close()})).catch((function(e){console.log("Ошибка ".concat(e.status))})).finally((function(){ne.handleLoading("Сохранить")}))})),re=new x(".popup_type_add",(function(e){re.handleLoading(),X.addNewCard(e.name,e.link).then((function(e){var t=oe(e,W);ie.addItem(t),re.close()})).catch((function(e){console.log("Ошибка ".concat(e.status))})).finally((function(){re.handleLoading("Сохранить")}))})),oe=function(e){var t=new y({data:e,handleCardClick:function(e){Y.open(e)},handleDeleteClick:function(e){Z.open(),Z.setSubmitAction((function(){X.deleteCard(e.cardId).then((function(t){e.delete(t),Z.close()})).catch((function(e){console.log("Ошибка ".concat(e.status))}))}))},handleLikeClick:function(e){e.hasLiked()?X.deleteLike(e.cardId).then((function(t){e.deleteLike(),e.setLike(t)})):X.setLike(e.cardId).then((function(t){e.addLike(),e.setLike(t)}))}},W,".element__template");return t.generateCard()},ie=new m({renderer:function(e){ie.addItem(oe(e))}},".elements__list"),ue=new g(s,t),ae=new g(s,n),ce=new g(s,o);ue.enableValidation(),ae.enableValidation(),ce.enableValidation(),Y.setEventListeners(),ne.setEventListeners(),re.setEventListeners(),te.setEventListeners(),Z.setEventListeners(),l.addEventListener("click",(function(){ce.clearInputErrors(),ce.disableButton(),te.open()})),e.addEventListener("click",(function(){var e=ee.getUserInfo();u.value=e.name,a.value=e.about,ue.clearInputErrors(),ne.open()})),c.addEventListener("click",(function(){ae.clearInputErrors(),ae.disableButton(),re.open()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RG1NLEdBQTJCRyxtQkFDM0JGLEdBQXlCRSxtQkFDekJELEdBQTBCQyxtQkFFMUJ4QixFQUFleUIsb0JBQ2ZuQixHQUFxQm1CLG9CQUNyQmpCLEdBQW1CaUIsb0JBQ25CdkIsR0FBZ0J1QixvQkFDaEJ4QixFQUFnQndCLG9CQUVoQmpNLEVBQWtCb0QsaUJBQWlCLFNBQVMsV0FDMUMySSxHQUEwQkcsbUJBQzFCSCxHQUEwQnhHLGdCQUUxQm1GLEdBQWdCWSxNQUNsQixJQUVBbE0sRUFBa0JnRSxpQkFBaUIsU0FBUyxXQUMzQyxJQUFNK0ksRUFBa0JuQyxHQUFnQm9DLGNBRXZDdk0sRUFBVXVDLE1BQVErSixFQUFnQjNLLEtBQ2xDMUIsRUFBU3NDLE1BQVErSixFQUFnQjFFLE1BRWpDb0UsR0FBMkJLLG1CQUUzQnBCLEdBQXFCUSxNQUN2QixJQUVBdkwsRUFBaUJxRCxpQkFBaUIsU0FBUyxXQUN6QzBJLEdBQXlCSSxtQkFDekJKLEdBQXlCdkcsZ0JBRXpCeUYsR0FBbUJNLE1BQ3JCLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy91dGlscy9kYXRhLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fZWRpdC1idXR0b24nKTtcbmNvbnN0IHByb2ZpbGVQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF90eXBlX2VkaXQnKTtcbmNvbnN0IHBsYWNlUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfdHlwZV9hZGQnKTtcbmNvbnN0IGltYWdlUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfdHlwZV9pbWFnZScpO1xuY29uc3QgYXZhdGFyUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfdHlwZV9hdmF0YXInKTtcbmNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X190ZW1wbGF0ZScpO1xuY29uc3QgcG9wdXBFZGl0Q2xvc2VCdXR0b24gPSBwcm9maWxlUG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19idXR0b24tY2xvc2VkJyk7XG5jb25zdCBwb3B1cEFkZENsb3NlQnV0dG9uID0gcGxhY2VQb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2J1dHRvbi1jbG9zZWQnKTtcbmNvbnN0IHBvcHVwQ2xvc2VCdXR0b25MaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwX19idXR0b24tY2xvc2VkJyk7XG5jb25zdCBwb3B1cEltYWdlQ2xvc2VCdXR0b24gPSBpbWFnZVBvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fYnV0dG9uLWNsb3NlZCcpO1xuY29uc3QgcHJvZmlsZUZvcm1FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbnB1dHNfcGxhY2VkX3Byb2ZpbGUnKTtcbmNvbnN0IHBsYWNlRm9ybUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2lucHV0c19wbGFjZWRfZWxlbWVudHMnKTtcbmNvbnN0IHVzZXJOYW1lRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19uYW1lJyk7XG5jb25zdCB1c2VyQWJvdXRNZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fb2NjdXBhdGlvbicpO1xuY29uc3QgdXNlckF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hdmF0YXInKTtcbmNvbnN0IGF2YXRhcklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pdGVtX3R5cGVfYXZhdGFyJyk7XG5jb25zdCBuYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2l0ZW1fdHlwZV9uYW1lJyk7XG5jb25zdCBqb2JJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faXRlbV90eXBlX2Fib3V0Jyk7XG5jb25zdCB0aXRsZUlucHV0ID0gcGxhY2VGb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2l0ZW1fdHlwZV9wbGFjZScpO1xuY29uc3QgbGlua0lucHV0ID0gcGxhY2VGb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2l0ZW1fdHlwZV9saW5rJyk7XG5jb25zdCBwcm9maWxlQWRkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2FkZC1idXR0b24nKTtcbmNvbnN0IGNhcmRzQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRzX19saXN0Jyk7XG5jb25zdCBpbWFnZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2ltYWdlJyk7XG5jb25zdCBpbWFnZUNhcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2NhcHRpb24nKTtcbmNvbnN0IHBvcHVwTGlzdCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwJykpO1xuY29uc3QgcG9wdXBBdmF0YXJCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYXZhdGFyLWJ1dHRvbicpO1xuXG5jb25zdCBjb25maWcgPSB7XG4gIGZvcm1TZWxlY3RvcjogJy5wb3B1cF9faW5wdXRzJyxcbiAgaW5wdXRTZWxlY3RvcjogJy5wb3B1cF9faXRlbScsXG4gIGVycm9yQ2xhc3NUZW1wbGF0ZTogJy5wb3B1cF9faXRlbS1lcnJvcl90eXBlXycsXG4gIGFjdGl2ZUVycm9yQ2xhc3M6ICdwb3B1cF9faW5wdXQtZXJyb3InLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogJy5wb3B1cF9fYnV0dG9uJyxcbiAgdmFsaWRTdWJtaXRCdXR0b25DbGFzczogJ3BvcHVwX19idXR0b25fdmFsaWQnLFxuICBlcnJvckNsYXNzOiAncG9wdXBfX2l0ZW0tdW5kZXJsaW5lJ1xufTtcblxuZXhwb3J0IHsgcHJvZmlsZUVkaXRCdXR0b24sIHByb2ZpbGVQb3B1cCwgcGxhY2VQb3B1cCwgaW1hZ2VQb3B1cCwgYXZhdGFyUG9wdXAsIGNhcmRUZW1wbGF0ZSwgcG9wdXBFZGl0Q2xvc2VCdXR0b24sIHBvcHVwQWRkQ2xvc2VCdXR0b24sIHBvcHVwQ2xvc2VCdXR0b25MaXN0LCBwb3B1cEltYWdlQ2xvc2VCdXR0b24sIHByb2ZpbGVGb3JtRWxlbWVudCwgcGxhY2VGb3JtRWxlbWVudCwgdXNlck5hbWVFbGVtZW50LCB1c2VyQWJvdXRNZUVsZW1lbnQsIHVzZXJBdmF0YXIsIGF2YXRhcklucHV0LCBuYW1lSW5wdXQsIGpvYklucHV0LCB0aXRsZUlucHV0LCBsaW5rSW5wdXQsIHByb2ZpbGVBZGRCdXR0b24sIGNhcmRzQ29udGFpbmVyLCBpbWFnZUVsZW1lbnQsIGltYWdlQ2FwdGlvbiwgcG9wdXBMaXN0LCBwb3B1cEF2YXRhckJ1dHRvbiwgY29uZmlnIH1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvciggeyBkYXRhLCBoYW5kbGVDYXJkQ2xpY2ssIGhhbmRsZURlbGV0ZUNsaWNrLCBoYW5kbGVMaWtlQ2xpY2sgfSwgdXNlcklkLCB0ZW1wbGF0ZVNlbGVjdG9yKSB7XG4gICAgdGhpcy5jYXJkSWQgPSBkYXRhLl9pZDtcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XG4gICAgdGhpcy5fbGlrZXMgPSBkYXRhLmxpa2VzO1xuICAgIHRoaXMuX293bmVySWQgPSBkYXRhLm93bmVyLl9pZDtcblxuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcbiAgICB0aGlzLl9oYW5kbGVMaWtlQ2xpY2sgPSBoYW5kbGVMaWtlQ2xpY2s7XG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2sgPSBoYW5kbGVEZWxldGVDbGljaztcblxuICAgIHRoaXMudXNlcklkID0gdXNlcklkO1xuICAgIHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IgPSB0ZW1wbGF0ZVNlbGVjdG9yO1xuICB9XG5cbiAgLy/QvNC10YLQvtC0LCDQutC+0YLQvtGA0YvQuSDQv9C+0LvRg9GH0LDQtdGCINGA0LDQt9C80LXRgtC60YMg0LjQtyDRiNCw0LHQu9C+0L3QsFxuICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fdGVtcGxhdGVTZWxlY3RvcilcbiAgICAgIC5jb250ZW50XG4gICAgICAucXVlcnlTZWxlY3RvcignLmVsZW1lbnQnKVxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcblxuICAgIHJldHVybiBjYXJkRWxlbWVudDtcbiAgfVxuXG4gIC8v0L7QsdGA0LDQsdC+0YLRh9C40LrQuCDQu9Cw0LnQutCwXG4gIGFkZExpa2UoKSB7XG4gICAgdGhpcy5fYnV0dG9uTGlrZS5jbGFzc0xpc3QuYWRkKCdlbGVtZW50X19saWtlLWJ1dHRvbl9hY3RpdmUnKTtcbiAgfVxuXG4gIGRlbGV0ZUxpa2UoKSB7XG4gICAgdGhpcy5fYnV0dG9uTGlrZS5jbGFzc0xpc3QucmVtb3ZlKCdlbGVtZW50X19saWtlLWJ1dHRvbl9hY3RpdmUnKTtcbiAgfVxuXG4gIHNldExpa2UoZGF0YSkge1xuICAgIHRoaXMuX2NvdW50ZXJMaWtlcy50ZXh0Q29udGVudCA9IGRhdGEubGlrZXMubGVuZ3RoO1xuICAgIHRoaXMuX2xpa2VzID0gZGF0YS5saWtlcztcbiAgfVxuXG4gIF9saWtlQ2FyZCgpIHtcbiAgICB0aGlzLmhhc0xpa2VkO1xuICB9XG5cbiAgaGFzTGlrZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2xpa2VzLnNvbWUoKGl0ZW0pID0+IGl0ZW0uX2lkID09PSB0aGlzLnVzZXJJZCk7XG4gIH1cblxuICAvL9C+0LHRgNCw0LHQvtGC0YfQuNC6INGD0LTQsNC70LXQvdC40Y9cbiAgZGVsZXRlKCkge1xuICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XG4gICAgdGhpcy5fZWxlbWVudCA9IG51bGw7XG4gIH07XG5cbiAgLy/QvdCw0LrQu9Cw0LTRi9Cy0LDQtdGCINCy0YHQtSDQvtCx0YDQsNCx0L7RgtGH0LjQutC4INGB0L7QsdGL0YLQuNC5INC90LAg0LrQsNGA0YLQvtGH0LrRg1xuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fYnV0dG9uTGlrZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUxpa2VDbGljayh0aGlzKTtcbiAgICB9KTtcblxuICAgIHRoaXMuX2J1dHRvbkRlbGV0ZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNsaWNrKHRoaXMpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKHtcbiAgICAgICAgbmFtZTogdGhpcy5fbmFtZSxcbiAgICAgICAgbGluazogdGhpcy5fbGlua1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICAvL9GB0L7Qt9C00LDQvdC40LUg0LrQsNGA0YLQvtGH0LrQuCDQtNC70Y8g0LTQsNC70YzQvdC10LnRiNC10Lkg0L7RgtGA0LjRgdC+0LLQutC4INCyINGA0LDQt9C80LXRgtC60LVcbiAgZ2VuZXJhdGVDYXJkKCkge1xuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuXG4gICAgLy/Qt9Cw0LPQvtC70L7QstC+0LpcbiAgICB0aGlzLl9jYXJkVGl0bGUgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X190aXRsZScpO1xuICAgIHRoaXMuX2NhcmRUaXRsZS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG5cbiAgICAvL9C40LfQvtCx0YDQsNC20LXQvdC40LVcbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19pbWFnZScpO1xuICAgIHRoaXMuX2NhcmRJbWFnZS5zcmMgPSAgdGhpcy5fbGluaztcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWx0ID0gYNCk0L7RgtC+0LPRgNCw0YTQuNGPICR7dGhpcy5fbmFtZX1gO1xuXG4gICAgLy/QutC90L7Qv9C60LhcbiAgICB0aGlzLl9idXR0b25MaWtlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fbGlrZS1idXR0b24nKTtcbiAgICAvL9GB0YfRkdGC0YfQuNC6INC70LDQudC60L7QslxuICAgIHRoaXMuX2NvdW50ZXJMaWtlcyA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX3F1YW50aXR5LWxpa2VzJyk7XG4gICAgdGhpcy5fY291bnRlckxpa2VzLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoO1xuICAgIGlmICh0aGlzLmhhc0xpa2VkKCkpIHtcbiAgICAgIHRoaXMuYWRkTGlrZSgpO1xuICAgIH1cblxuICAgIHRoaXMuX2J1dHRvbkRlbGV0ZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2RlbGV0ZS1idXR0b24nKTtcbiAgICAgIGlmICh0aGlzLl9vd25lcklkICE9PSB0aGlzLnVzZXJJZCkge1xuICAgICAgICB0aGlzLl9idXR0b25EZWxldGUucmVtb3ZlKCk7XG4gICAgICB9O1xuXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9saWtlQ2FyZCgpO1xuXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XG4gIH07XG59O1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gIC8v0LrQvtC90YHRgtGA0YPQutGC0L7RgCwg0LrQvtGC0L7RgNGL0Lkg0L/RgNC40L3QuNC80LDQtdGCINC00LDQvdC90YvQtSDQutCw0YDRgtC+0YfQutC4INC4INGI0LDQsdC70L7QvSwg0Lgg0YHQvtGF0YDQsNC90Y/QtdGCINGN0YLQuCDQt9C90LDRh9C10L3QuNGPINCyINGB0LLQvtC50YHRgtCy0LDRhVxuICBjb25zdHJ1Y3RvciggeyByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xuICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xuICB9XG5cbiAgLy/QvtGC0YDQuNGB0L7QstC60LAg0LLRgdC10YUg0Y3Qu9C10LzQtdC90YLQvtCyXG4gIHJlbmRlckl0ZW1zKGl0ZW1zKSB7XG4gICAgaXRlbXMuZm9yRWFjaCh0aGlzLl9yZW5kZXJlcik7XG4gIH1cblxuICBhZGRJdGVtKGVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcbiAgfVxufVxuXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdGlvbiB7XG4gIC8v0L/RgNC40L3QuNC80LDQtdGCINCyINC60L7QvdGB0YLRgNGD0LrRgtC+0YAg0L7QsdGK0LXQutGCINC90LDRgdGC0YDQvtC10Log0YEg0YHQtdC70LXQutGC0L7RgNCw0LzQuCDQuCDQutC70LDRgdGB0LDQvNC4INGE0L7RgNC80YssINC/0YDQuNC90LjQvNCw0LXRgiDQstGC0L7RgNGL0Lwg0L/QsNGA0LDQvNC10YLRgNC+0Lwg0Y3Qu9C10LzQtdC90YIg0YLQvtC5INGE0L7RgNC80YssINC60L7RgtC+0YDQsNGPINCy0LDQu9C40LTQuNGA0YPQtdGC0YHRjztcbiAgY29uc3RydWN0b3IoY29uZmlnLCBmb3JtKSB7XG4gICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgIHRoaXMuX2Zvcm0gPSBmb3JtO1xuICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5jb25maWcuaW5wdXRTZWxlY3RvcikpO1xuICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcbiAgfTtcblxuICBfc2hvd0lucHV0RXJyb3IgPSAoaW5wdXQsIHZhbGlkYXRpb25NZXNzYWdlKSA9PiB7XG4gICAgY29uc3QgZXJyb3JUZXh0RWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgJHt0aGlzLmNvbmZpZy5lcnJvckNsYXNzVGVtcGxhdGV9JHtpbnB1dC5uYW1lfWApO1xuICAgIGlucHV0LmNsYXNzTGlzdC5hZGQodGhpcy5jb25maWcuZXJyb3JDbGFzcyk7XG4gICAgZXJyb3JUZXh0RWxlbWVudC50ZXh0Q29udGVudCA9IHZhbGlkYXRpb25NZXNzYWdlO1xuICAgIGVycm9yVGV4dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLmNvbmZpZy5hY3RpdmVFcnJvckNsYXNzKTtcbiAgfTtcblxuICBfaGlkZUlucHV0RXJyb3IgPSAoaW5wdXQpID0+IHtcbiAgICBjb25zdCBlcnJvclRleHRFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAke3RoaXMuY29uZmlnLmVycm9yQ2xhc3NUZW1wbGF0ZX0ke2lucHV0Lm5hbWV9YCk7XG4gICAgaW5wdXQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLmNvbmZpZy5lcnJvckNsYXNzKTtcbiAgICBlcnJvclRleHRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5jb25maWcuYWN0aXZlRXJyb3JDbGFzcyk7XG4gICAgZXJyb3JUZXh0RWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xuICB9O1xuXG4gIGNsZWFySW5wdXRFcnJvcnMgPSAoKSA9PiB7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dCk7XG4gICAgfSk7XG4gIH07XG5cbiAgLy/QuNC30LzQtdC90Y/QtdGCINGB0L7RgdGC0L7Rj9C90LjQtSDQutC90L7Qv9C60Lgg0YHQsNCx0LzQuNGC0LBcbiAgZGlzYWJsZUJ1dHRvbigpIHtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLmNvbmZpZy52YWxpZFN1Ym1pdEJ1dHRvbkNsYXNzKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICB9O1xuXG4gIF9lbmFibGVCdXR0b24oKSB7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5jb25maWcudmFsaWRTdWJtaXRCdXR0b25DbGFzcyk7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gIH07XG5cbiAgLy/QvNC10YLQvtC0INC/0YDQvtCy0LXRgNGP0LXRgiDQstCw0LvQuNC00L3QvtGB0YLRjCDQv9C+0LvRj1xuICBfY2hlY2tJbnB1dFZhbGlkYXRpb24oaW5wdXQpIHtcbiAgICBpZighaW5wdXQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0LCBpbnB1dC52YWxpZGF0aW9uTWVzc2FnZSwgdGhpcy5jb25maWcpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpbnB1dC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuY29uZmlnLmVycm9yQ2xhc3MpO1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXQpO1xuICAgIH07XG4gIH07XG5cbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLl9pbnB1dExpc3QpLnNvbWUoKGlucHV0KSA9PiAhaW5wdXQudmFsaWRpdHkudmFsaWQpO1xuICB9O1xuXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICBpZighdGhpcy5faGFzSW52YWxpZElucHV0KHRoaXMuX2lucHV0TGlzdCkpIHtcbiAgICAgIHRoaXMuX2VuYWJsZUJ1dHRvbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmRpc2FibGVCdXR0b24oKTtcbiAgICB9O1xuICB9O1xuXG4vL9GD0YHRgtCw0L3QsNCy0LvQuNCy0LDQtdGCINCy0YHQtSDQvtCx0YDQsNCx0L7RgtGH0LjQutC4XG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcbiAgICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGF0aW9uKGlucHV0KTtcbiAgICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICAgIH0pO1xuICAgICB9KTtcbiAgfTtcblxuICAvL9Cy0LrQu9GO0YfQsNC10YIg0LLQsNC70LjQtNCw0YbQuNGOINGE0L7RgNC80YtcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoKSA9PiB7XG4gICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuXG4gICAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2V0JywgKCkgPT4ge1xuICAgICAgICB0aGlzLmRpc2FibGVCdXR0b24oKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xufTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IgKHBvcHVwU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gIH1cblxuICBvcGVuKCkge1xuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoJ3BvcHVwX29wZW5lZCcpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXBfb3BlbmVkJyk7XG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBfaGFuZGxlRXNjQ2xvc2UgPSAoZXZ0KSA9PiB7XG4gICAgICBpZiAoZXZ0LmtleSA9PT0gJ0VzY2FwZScpIHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH07XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQpID0+IHtcbiAgICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfb3BlbmVkJykgfHwgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwX19idXR0b24tY2xvc2VkJykpIHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfVxuICAgIH0pXG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcblxuICAgIHRoaXMuX2ltYWdlRWxlbWVudCA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW1hZ2UnKTtcbiAgICB0aGlzLl9pbWFnZUNhcHRpb24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2NhcHRpb24nKTtcbiAgfVxuXG4gIG9wZW4oZGF0YSkge1xuICAgIHRoaXMuX2ltYWdlRWxlbWVudC5zcmMgPSBkYXRhLmxpbms7XG4gICAgdGhpcy5faW1hZ2VFbGVtZW50LmFsdCA9IGRhdGEubmFtZTtcbiAgICB0aGlzLl9pbWFnZUNhcHRpb24udGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XG4gICAgc3VwZXIub3BlbigpO1xuICB9XG5cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG5cbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbnB1dHMnKTtcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cF9faXRlbScpKTtcbiAgfVxuXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICBjb25zdCBmb3JtVmFsdWVzID0ge307XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goaW5wdXQgPT4ge1xuICAgICAgY29uc3QgdmFsdWUgPSBpbnB1dC52YWx1ZTtcbiAgICAgIGNvbnN0IG5hbWUgPSBpbnB1dC5uYW1lO1xuXG4gICAgICBmb3JtVmFsdWVzW25hbWVdID0gdmFsdWU7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gZm9ybVZhbHVlcztcbiAgfVxuXG4gIGhhbmRsZUxvYWRpbmcoKSB7XG4gICAgY29uc3QgbG9hZGluZ0VsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fYnV0dG9uJyk7XG4gICAgbG9hZGluZ0VsZW1lbnQudGV4dENvbnRlbnQgPSAn0KHQvtGF0YDQsNC90LXQvdC40LUuLi4nO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgIGNvbnN0IGlucHV0VmFsdWVzID0gdGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKTtcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQoaW5wdXRWYWx1ZXMpO1xuICAgIH0pXG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3Rvcih7IG5hbWUsIGFib3V0LCBhdmF0YXIgfSkge1xuICAgIHRoaXMuX3VzZXJOYW1lRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZSk7XG4gICAgdGhpcy5fdXNlckFib3V0TWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhYm91dCk7XG4gICAgdGhpcy5fYXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhdmF0YXIpO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IHRoaXMuX3VzZXJOYW1lRWxlbWVudC50ZXh0Q29udGVudCxcbiAgICAgIGFib3V0OiB0aGlzLl91c2VyQWJvdXRNZUVsZW1lbnQudGV4dENvbnRlbnQsXG4gICAgICBhdmF0YXI6IHRoaXMuX2F2YXRhci5zcmNcbiAgICB9XG4gIH1cblxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGFib3V0LCBhdmF0YXIgfSkge1xuICAgIHRoaXMuX3VzZXJOYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgdGhpcy5fdXNlckFib3V0TWVFbGVtZW50LnRleHRDb250ZW50ID0gYWJvdXQ7XG4gICAgdGhpcy5fYXZhdGFyLnNyYyA9IGF2YXRhcjtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gJy4vUG9wdXAuanMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhDb25maXJtYXRpb24gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGNhcmRJZCkge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuXG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRzJyk7XG4gICAgdGhpcy5fY2FyZElkID0gY2FyZElkO1xuICB9XG5cbiAgc2V0U3VibWl0QWN0aW9uKGFjdGlvbikge1xuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBhY3Rpb247XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQoKTtcbiAgICB9KTtcbiAgfTtcbn1cbiIsImltcG9ydCAnLi9pbmRleC5jc3MnO1xuXG5pbXBvcnQgeyBwcm9maWxlRWRpdEJ1dHRvbiwgcHJvZmlsZVBvcHVwLCBwbGFjZVBvcHVwLCBhdmF0YXJQb3B1cCwgbmFtZUlucHV0LCBqb2JJbnB1dCwgcHJvZmlsZUFkZEJ1dHRvbiwgcG9wdXBBdmF0YXJCdXR0b24sIGNvbmZpZyB9IGZyb20nLi4vdXRpbHMvZGF0YS5qcyc7XG5pbXBvcnQgQ2FyZCBmcm9tICcuLi9jb21wb25lbnRzL0NhcmQuanMnO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSAnLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzJztcbmltcG9ydCBGb3JtVmFsaWRhdGlvbiBmcm9tICcuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0aW9uLmpzJztcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzJztcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyc7XG5pbXBvcnQgVXNlckluZm8gZnJvbSAnLi4vY29tcG9uZW50cy9Vc2VySW5mby5qcyc7XG5pbXBvcnQgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzJztcbmltcG9ydCBBcGkgZnJvbSAnLi4vY29tcG9uZW50cy9BcGknO1xuXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcbiAgYmFzZVVybDogJ2h0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtNjUnLFxuICBoZWFkZXJzOiB7XG4gICAgYXV0aG9yaXphdGlvbjogJzZmMDIxMTZhLWU3NWQtNDQxMi04YWVkLWFmMTI0OTljOWJkOCcsXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgfVxufSk7XG5cbmxldCB1c2VySWQ7XG5cblByb21pc2UuYWxsKFthcGkuZ2V0VXNlcigpLCBhcGkuZ2V0SW5pdGlhbENhcmRzKCldKVxuICAudGhlbigoW3VzZXJJbmZvLCBjYXJkc10pID0+IHtcbiAgICB1c2VySWQgPSB1c2VySW5mby5faWQ7XG4gICAgdXNlckluZm9FbGVtZW50LnNldFVzZXJJbmZvKHVzZXJJbmZvKTtcbiAgICBzZWN0aW9uLnJlbmRlckl0ZW1zKGNhcmRzLnJldmVyc2UoKSk7XG4gICAgfSlcbiAuY2F0Y2goKHJlcykgPT4ge1xuICAgIGNvbnNvbGUubG9nKGDQntGI0LjQsdC60LAgJHtyZXMuc3RhdHVzfWApXG4gIH0pXG5cbmNvbnN0IHBvcHVwV2l0aEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKCcucG9wdXBfdHlwZV9pbWFnZScpO1xuXG5jb25zdCBwb3B1cFdpdGhTdWJtaXQgPSBuZXcgUG9wdXBXaXRoQ29uZmlybWF0aW9uKCcucG9wdXBfdHlwZV9zdWJtaXQnKTtcbmNvbnN0IHVzZXJJbmZvRWxlbWVudCA9IG5ldyBVc2VySW5mbyh7XG4gIG5hbWU6ICcucHJvZmlsZV9fbmFtZScsXG4gIGFib3V0OiAnLnByb2ZpbGVfX29jY3VwYXRpb24nLFxuICBhdmF0YXI6ICcucHJvZmlsZV9fYXZhdGFyJ1xufSk7XG5cbmNvbnN0IHBvcHVwV2l0aEF2YXRhciA9IG5ldyBQb3B1cFdpdGhGb3JtKFxuICAnLnBvcHVwX3R5cGVfYXZhdGFyJyxcbiAgKGRhdGEpID0+IHtcbiAgICBwb3B1cFdpdGhBdmF0YXIuaGFuZGxlTG9hZGluZygpO1xuICAgIGFwaS5jaGFuZ2VBdmF0YXIoZGF0YS5hdmF0YXIpXG4gICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgIHVzZXJJbmZvRWxlbWVudC5zZXRVc2VySW5mbyhyZXMpO1xuICAgICAgICBwb3B1cFdpdGhBdmF0YXIuY2xvc2UoKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKHJlcykgPT4ge1xuICAgICAgICAgY29uc29sZS5sb2coYNCe0YjQuNCx0LrQsCAke3Jlcy5zdGF0dXN9YCk7XG4gICAgICB9KVxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICBwb3B1cFdpdGhBdmF0YXIuaGFuZGxlTG9hZGluZygn0KHQvtGF0YDQsNC90LjRgtGMJyk7XG4gICAgICB9KVxuICB9KTtcblxuY29uc3QgcHJvZmlsZVBvcHVwV2l0aEZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgJy5wb3B1cF90eXBlX2VkaXQnLFxuICAoZGF0YSkgPT4ge1xuICAgIHByb2ZpbGVQb3B1cFdpdGhGb3JtLmhhbmRsZUxvYWRpbmcoKTtcbiAgICBhcGkuZWRpdFVzZXJJbmZvKGRhdGEubmFtZSwgZGF0YS5hYm91dClcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgdXNlckluZm9FbGVtZW50LnNldFVzZXJJbmZvKHJlcyk7XG4gICAgICAgIHByb2ZpbGVQb3B1cFdpdGhGb3JtLmNsb3NlKCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChyZXMpID0+IHtcbiAgICAgICAgIGNvbnNvbGUubG9nKGDQntGI0LjQsdC60LAgJHtyZXMuc3RhdHVzfWApO1xuICAgICAgfSlcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgcHJvZmlsZVBvcHVwV2l0aEZvcm0uaGFuZGxlTG9hZGluZygn0KHQvtGF0YDQsNC90LjRgtGMJyk7XG4gICAgICB9KVxufSk7XG5cbmNvbnN0IHBsYWNlUG9wdXBXaXRoRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKFxuICAnLnBvcHVwX3R5cGVfYWRkJyxcbiAgKGRhdGEpID0+IHtcbiAgICBwbGFjZVBvcHVwV2l0aEZvcm0uaGFuZGxlTG9hZGluZygpO1xuICAgIGFwaS5hZGROZXdDYXJkKGRhdGEubmFtZSwgZGF0YS5saW5rKVxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNyZWF0ZUNhcmQocmVzLCB1c2VySWQpO1xuICAgICAgICBzZWN0aW9uLmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xuICAgICAgICBwbGFjZVBvcHVwV2l0aEZvcm0uY2xvc2UoKTtcbiAgICAgICAgfSlcbiAgICAgIC5jYXRjaCgocmVzKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGDQntGI0LjQsdC60LAgJHtyZXMuc3RhdHVzfWApO1xuICAgICAgfSlcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgcGxhY2VQb3B1cFdpdGhGb3JtLmhhbmRsZUxvYWRpbmcoJ9Ch0L7RhdGA0LDQvdC40YLRjCcpO1xuICAgICAgfSlcbn0pO1xuXG5jb25zdCBjcmVhdGVDYXJkID0gKGRhdGEpID0+IHtcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkICh7XG4gICAgZGF0YSxcbiAgICBoYW5kbGVDYXJkQ2xpY2s6IChkYXRhKSA9PiB7XG4gICAgICBwb3B1cFdpdGhJbWFnZS5vcGVuKGRhdGEpO1xuICAgIH0sXG4gICAgaGFuZGxlRGVsZXRlQ2xpY2s6IChjYXJkKSA9PiB7XG4gICAgICBwb3B1cFdpdGhTdWJtaXQub3BlbigpO1xuICAgICAgcG9wdXBXaXRoU3VibWl0LnNldFN1Ym1pdEFjdGlvbigoKSA9PiB7XG4gICAgICAgIGFwaS5kZWxldGVDYXJkKGNhcmQuY2FyZElkKVxuICAgICAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgICAgIGNhcmQuZGVsZXRlKHJlcyk7XG4gICAgICAgICAgICBwb3B1cFdpdGhTdWJtaXQuY2xvc2UoKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChyZXMpID0+IHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhg0J7RiNC40LHQutCwICR7cmVzLnN0YXR1c31gKTtcbiAgICAgICAgfSlcbiAgICAgfSlcbiAgICB9LFxuICAgIGhhbmRsZUxpa2VDbGljazogKGNhcmQpID0+IHtcbiAgICAgIGlmIChjYXJkLmhhc0xpa2VkKCkpIHtcbiAgICAgICAgYXBpLmRlbGV0ZUxpa2UoY2FyZC5jYXJkSWQpXG4gICAgICAgICAgLnRoZW4gKChyZXMpID0+IHtcbiAgICAgICAgICAgIGNhcmQuZGVsZXRlTGlrZSgpO1xuICAgICAgICAgICAgY2FyZC5zZXRMaWtlKHJlcyk7XG4gICAgICAgICB9KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXBpLnNldExpa2UoY2FyZC5jYXJkSWQpXG4gICAgICAgICAgLnRoZW4gKChyZXMpID0+IHtcbiAgICAgICAgICAgIGNhcmQuYWRkTGlrZSgpO1xuICAgICAgICAgICAgY2FyZC5zZXRMaWtlKHJlcyk7XG4gICAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG4gIH0sXG4gIHVzZXJJZCxcbiAgJy5lbGVtZW50X190ZW1wbGF0ZSdcbiAgKTtcbiAgICAgIHJldHVybiBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xufTtcblxuICAgIGNvbnN0IHNlY3Rpb24gPSBuZXcgU2VjdGlvbiAoe1xuICAgICAgcmVuZGVyZXI6IChkYXRhKSA9PiB7XG4gICAgICAgIHNlY3Rpb24uYWRkSXRlbShjcmVhdGVDYXJkKGRhdGEpKTtcbiAgICAgIH19LFxuICAgICcuZWxlbWVudHNfX2xpc3QnKTtcblxuXG5jb25zdCBmb3JtVmFsaWRhdGlvblByb2ZpbGVQb3B1cCA9IG5ldyBGb3JtVmFsaWRhdGlvbihjb25maWcsIHByb2ZpbGVQb3B1cCk7XG5jb25zdCBmb3JtVmFsaWRhdGlvblBsYWNlUG9wdXAgPSBuZXcgRm9ybVZhbGlkYXRpb24oY29uZmlnLCBwbGFjZVBvcHVwKTtcbmNvbnN0IGZvcm1WYWxpZGF0aW9uQXZhdGFyUG9wdXAgPSBuZXcgRm9ybVZhbGlkYXRpb24oY29uZmlnLCBhdmF0YXJQb3B1cCk7XG5cbmZvcm1WYWxpZGF0aW9uUHJvZmlsZVBvcHVwLmVuYWJsZVZhbGlkYXRpb24oKTtcbmZvcm1WYWxpZGF0aW9uUGxhY2VQb3B1cC5lbmFibGVWYWxpZGF0aW9uKCk7XG5mb3JtVmFsaWRhdGlvbkF2YXRhclBvcHVwLmVuYWJsZVZhbGlkYXRpb24oKTtcblxucG9wdXBXaXRoSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbnByb2ZpbGVQb3B1cFdpdGhGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5wbGFjZVBvcHVwV2l0aEZvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbnBvcHVwV2l0aEF2YXRhci5zZXRFdmVudExpc3RlbmVycygpO1xucG9wdXBXaXRoU3VibWl0LnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbnBvcHVwQXZhdGFyQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBmb3JtVmFsaWRhdGlvbkF2YXRhclBvcHVwLmNsZWFySW5wdXRFcnJvcnMoKTtcbiAgZm9ybVZhbGlkYXRpb25BdmF0YXJQb3B1cC5kaXNhYmxlQnV0dG9uKCk7XG5cbiAgcG9wdXBXaXRoQXZhdGFyLm9wZW4oKTtcbn0pO1xuXG5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiBjb25zdCBwcm9maWxlVXNlckluZm8gPSB1c2VySW5mb0VsZW1lbnQuZ2V0VXNlckluZm8oKTtcblxuICBuYW1lSW5wdXQudmFsdWUgPSBwcm9maWxlVXNlckluZm8ubmFtZTtcbiAgam9iSW5wdXQudmFsdWUgPSBwcm9maWxlVXNlckluZm8uYWJvdXQ7XG5cbiAgZm9ybVZhbGlkYXRpb25Qcm9maWxlUG9wdXAuY2xlYXJJbnB1dEVycm9ycygpO1xuXG4gIHByb2ZpbGVQb3B1cFdpdGhGb3JtLm9wZW4oKTtcbn0pO1xuXG5wcm9maWxlQWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBmb3JtVmFsaWRhdGlvblBsYWNlUG9wdXAuY2xlYXJJbnB1dEVycm9ycygpO1xuICBmb3JtVmFsaWRhdGlvblBsYWNlUG9wdXAuZGlzYWJsZUJ1dHRvbigpO1xuXG4gIHBsYWNlUG9wdXBXaXRoRm9ybS5vcGVuKCk7XG59KTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XG4gIGNvbnN0cnVjdG9yKHsgYmFzZVVybCwgaGVhZGVycyB9KSB7XG4gIHRoaXMuX2Jhc2VVcmwgPSBiYXNlVXJsO1xuICB0aGlzLl9oZWFkZXJzID0gaGVhZGVycztcbiAgfVxuXG4gIF9yZXNwb25kKHJlcykge1xuICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsCAke3Jlcy5zdGF0dXN9YCk7XG4gICAgfVxuICB9XG5cbiAgZ2V0VXNlcigpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXG4gICAgfSlcbiAgICAudGhlbigocmVzKSA9PiB0aGlzLl9yZXNwb25kKHJlcykpO1xuICB9XG5cbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcbiAgICB9KVxuICAgIC50aGVuKChyZXMpID0+IHRoaXMuX3Jlc3BvbmQocmVzKSk7XG4gIH1cblxuICBlZGl0VXNlckluZm8oIG5hbWUsIGFib3V0ICkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICBuYW1lLFxuICAgICAgYWJvdXRcbiAgICAgIH0pXG4gICAgfSlcbiAgICAudGhlbigocmVzKSA9PiB0aGlzLl9yZXNwb25kKHJlcykpO1xuICB9XG5cbiAgYWRkTmV3Q2FyZCggbmFtZSwgbGluayApIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZSxcbiAgICAgICAgbGlua1xuICAgICAgfSlcbiAgICB9KVxuICAgIC50aGVuKChyZXMpID0+IHRoaXMuX3Jlc3BvbmQocmVzKSk7XG4gIH1cblxuICBkZWxldGVDYXJkKCBjYXJkSWQgKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfWAsIHtcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcbiAgICB9KVxuICAgIC50aGVuKChyZXMpID0+IHRoaXMuX3Jlc3BvbmQocmVzKSk7XG4gIH1cblxuICBzZXRMaWtlKCBjYXJkSWQgKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcbiAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXG4gICAgfSlcbiAgICAudGhlbigocmVzKSA9PiB0aGlzLl9yZXNwb25kKHJlcykpO1xuICB9XG5cbiAgZGVsZXRlTGlrZSggY2FyZElkICkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XG4gICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xuICAgIH0pXG4gICAgLnRoZW4oKHJlcykgPT4gdGhpcy5fcmVzcG9uZChyZXMpKTtcbiAgfVxuXG4gIGNoYW5nZUF2YXRhciggYXZhdGFyICkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XG4gICAgICBtZXRob2Q6ICdQQVRDSCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBhdmF0YXJcbiAgICAgIH0pXG4gICAgfSlcbiAgICAudGhlbigocmVzKSA9PiB0aGlzLl9yZXNwb25kKHJlcykpO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJwcm9maWxlRWRpdEJ1dHRvbiIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInByb2ZpbGVQb3B1cCIsInBsYWNlUG9wdXAiLCJpbWFnZVBvcHVwIiwiYXZhdGFyUG9wdXAiLCJwbGFjZUZvcm1FbGVtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsIm5hbWVJbnB1dCIsImpvYklucHV0IiwicHJvZmlsZUFkZEJ1dHRvbiIsInBvcHVwQXZhdGFyQnV0dG9uIiwiQXJyYXkiLCJmcm9tIiwiY29uZmlnIiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsImVycm9yQ2xhc3NUZW1wbGF0ZSIsImFjdGl2ZUVycm9yQ2xhc3MiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsInZhbGlkU3VibWl0QnV0dG9uQ2xhc3MiLCJlcnJvckNsYXNzIiwiQ2FyZCIsIl9yZWYiLCJ1c2VySWQiLCJ0ZW1wbGF0ZVNlbGVjdG9yIiwiZGF0YSIsImhhbmRsZUNhcmRDbGljayIsImhhbmRsZURlbGV0ZUNsaWNrIiwiaGFuZGxlTGlrZUNsaWNrIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsImNhcmRJZCIsIl9pZCIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9saWtlcyIsImxpa2VzIiwiX293bmVySWQiLCJvd25lciIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfaGFuZGxlTGlrZUNsaWNrIiwiX2hhbmRsZURlbGV0ZUNsaWNrIiwiX3RlbXBsYXRlU2VsZWN0b3IiLCJrZXkiLCJ2YWx1ZSIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfYnV0dG9uTGlrZSIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsIl9jb3VudGVyTGlrZXMiLCJ0ZXh0Q29udGVudCIsImxlbmd0aCIsImhhc0xpa2VkIiwiX3RoaXMiLCJzb21lIiwiaXRlbSIsIl9lbGVtZW50IiwiX3RoaXMyIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9idXR0b25EZWxldGUiLCJfY2FyZEltYWdlIiwiX2dldFRlbXBsYXRlIiwiX2NhcmRUaXRsZSIsInNyYyIsImFsdCIsImNvbmNhdCIsImFkZExpa2UiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfbGlrZUNhcmQiLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJyZW5kZXJlciIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJpdGVtcyIsImZvckVhY2giLCJlbGVtZW50IiwicHJlcGVuZCIsIkZvcm1WYWxpZGF0aW9uIiwiZm9ybSIsIl9kZWZpbmVQcm9wZXJ0eSIsImlucHV0IiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJlcnJvclRleHRFbGVtZW50IiwiX2Zvcm0iLCJfaW5wdXRMaXN0IiwiX2hpZGVJbnB1dEVycm9yIiwiX3N1Ym1pdEJ1dHRvbiIsImRpc2FibGVkIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9zaG93SW5wdXRFcnJvciIsIl9oYXNJbnZhbGlkSW5wdXQiLCJkaXNhYmxlQnV0dG9uIiwiX2VuYWJsZUJ1dHRvbiIsIl9jaGVja0lucHV0VmFsaWRhdGlvbiIsIl90b2dnbGVCdXR0b25TdGF0ZSIsIl90aGlzMyIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsImV2dCIsImNsb3NlIiwiX3BvcHVwIiwid2luZG93IiwiX2hhbmRsZUVzY0Nsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInRhcmdldCIsImNvbnRhaW5zIiwiUG9wdXBXaXRoSW1hZ2UiLCJfUG9wdXAiLCJfaW5oZXJpdHMiLCJfc3VwZXIiLCJjYWxsIiwiX2ltYWdlRWxlbWVudCIsIl9pbWFnZUNhcHRpb24iLCJfZ2V0IiwiX2dldFByb3RvdHlwZU9mIiwicHJvdG90eXBlIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsImZvcm1WYWx1ZXMiLCJwcmV2ZW50RGVmYXVsdCIsImlucHV0VmFsdWVzIiwiX2dldElucHV0VmFsdWVzIiwicmVzZXQiLCJVc2VySW5mbyIsImFib3V0IiwiYXZhdGFyIiwiX3VzZXJOYW1lRWxlbWVudCIsIl91c2VyQWJvdXRNZUVsZW1lbnQiLCJfYXZhdGFyIiwiX3JlZjIiLCJQb3B1cFdpdGhDb25maXJtYXRpb24iLCJfY2FyZElkIiwiYWN0aW9uIiwiYXBpIiwiQXBpIiwiYmFzZVVybCIsImhlYWRlcnMiLCJfYmFzZVVybCIsIl9oZWFkZXJzIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImZldGNoIiwidGhlbiIsIl9yZXNwb25kIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJfdGhpczQiLCJfdGhpczUiLCJfdGhpczYiLCJfdGhpczciLCJfdGhpczgiLCJhdXRob3JpemF0aW9uIiwiYWxsIiwiZ2V0VXNlciIsImdldEluaXRpYWxDYXJkcyIsInVzZXJJbmZvIiwiY2FyZHMiLCJ1c2VySW5mb0VsZW1lbnQiLCJzZXRVc2VySW5mbyIsInNlY3Rpb24iLCJyZW5kZXJJdGVtcyIsInJldmVyc2UiLCJjYXRjaCIsImNvbnNvbGUiLCJsb2ciLCJwb3B1cFdpdGhJbWFnZSIsInBvcHVwV2l0aFN1Ym1pdCIsInBvcHVwV2l0aEF2YXRhciIsImhhbmRsZUxvYWRpbmciLCJjaGFuZ2VBdmF0YXIiLCJmaW5hbGx5IiwicHJvZmlsZVBvcHVwV2l0aEZvcm0iLCJlZGl0VXNlckluZm8iLCJwbGFjZVBvcHVwV2l0aEZvcm0iLCJhZGROZXdDYXJkIiwiY2FyZEVsZW1lbnQiLCJjcmVhdGVDYXJkIiwiYWRkSXRlbSIsImNhcmQiLCJvcGVuIiwic2V0U3VibWl0QWN0aW9uIiwiZGVsZXRlQ2FyZCIsImRlbGV0ZSIsImRlbGV0ZUxpa2UiLCJzZXRMaWtlIiwiZ2VuZXJhdGVDYXJkIiwiZm9ybVZhbGlkYXRpb25Qcm9maWxlUG9wdXAiLCJmb3JtVmFsaWRhdGlvblBsYWNlUG9wdXAiLCJmb3JtVmFsaWRhdGlvbkF2YXRhclBvcHVwIiwiZW5hYmxlVmFsaWRhdGlvbiIsInNldEV2ZW50TGlzdGVuZXJzIiwiY2xlYXJJbnB1dEVycm9ycyIsInByb2ZpbGVVc2VySW5mbyIsImdldFVzZXJJbmZvIl0sInNvdXJjZVJvb3QiOiIifQ==