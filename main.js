(()=>{"use strict";var t=document.querySelector(".profile__edit-button"),e=document.querySelector(".popup_type_edit"),n=document.querySelector(".popup_type_add"),r=document.querySelector(".popup_type_image"),o=document.querySelector(".popup_type_avatar"),i=(document.querySelector(".element__template"),e.querySelector(".popup__button-closed"),n.querySelector(".popup__button-closed"),document.querySelectorAll(".popup__button-closed"),r.querySelector(".popup__button-closed"),document.querySelector(".popup__inputs_placed_profile"),document.querySelector(".popup__inputs_placed_elements")),u=(document.querySelector(".profile__name"),document.querySelector(".profile__occupation"),document.querySelector(".profile__avatar"),document.querySelector(".popup__item_type_avatar"),document.querySelector(".popup__item_type_name")),a=document.querySelector(".popup__item_type_about"),c=(i.querySelector(".popup__item_type_place"),i.querySelector(".popup__item_type_link"),document.querySelector(".profile__add-button")),l=(document.querySelector(".elements__list"),document.querySelector(".popup__image"),document.querySelector(".popup__caption"),Array.from(document.querySelectorAll(".popup")),document.querySelector(".profile__avatar-button")),s={formSelector:".popup__inputs",inputSelector:".popup__item",errorClassTemplate:".popup__item-error_type_",activeErrorClass:"popup__input-error",submitButtonSelector:".popup__button",validSubmitButtonClass:"popup__button_valid",errorClass:"popup__item-underline"};function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==f(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===f(o)?o:String(o)),r)}var o}var y=function(){function t(e,n,r){var o=e.data,i=e.handleCardClick,u=e.handleDeleteClick,a=e.handleLikeClick;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.cardId=o._id,this._name=o.name,this._link=o.link,this.likes=o.likes,this._ownerId=o.owner._id,this._handleCardClick=i,this._handleLikeClick=a,this._handleDeleteClick=u,this.userId=n,this._templateSelector=r}var e,n;return e=t,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._templateSelector).content.querySelector(".element").cloneNode(!0)}},{key:"setLike",value:function(){this._buttonLike.classList.add("element__like-button_active")}},{key:"deleteLike",value:function(){this._buttonLike.classList.remove("element__like-button_active")}},{key:"isLiked",value:function(){var t=this;return this.likes.some((function(e){return e._id===t.userId}))}},{key:"delete",value:function(){this._element.remove()}},{key:"_setEventListeners",value:function(){var t=this;this._buttonLike.addEventListener("click",(function(){t._handleLikeClick(t)})),this._buttonDelete.addEventListener("click",(function(){t._handleDeleteClick(t)})),this._cardImage.addEventListener("click",(function(){t._handleCardClick({name:t._name,link:t._link})}))}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._cardTitle=this._element.querySelector(".element__title"),this._cardTitle.textContent=this._name,this._cardImage=this._element.querySelector(".element__image"),this._cardImage.src=this._link,this._cardImage.alt="Фотография ".concat(this._name),this._buttonLike=this._element.querySelector(".element__like-button"),this._counterLikes=this._element.querySelector(".element__quantity-likes"),this._counterLikes.textContent=this.likes.length,this.isLiked()&&this.setLike(),this._buttonDelete=this._element.querySelector(".element__delete-button"),this._ownerId!==this.userId&&this._buttonDelete.remove(),this._setEventListeners(),this._element}}])&&p(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function m(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==d(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===d(o)?o:String(o)),r)}var o}var h=function(){function t(e,n){var r=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderer=r,this._container=document.querySelector(n)}var e,n;return e=t,(n=[{key:"renderItems",value:function(t){t.forEach(this._renderer)}},{key:"addItem",value:function(t){this._container.prepend(t)}}])&&m(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function b(t){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b(t)}function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,S(r.key),r)}}function _(t,e,n){return(e=S(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function S(t){var e=function(t,e){if("object"!==b(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===b(e)?e:String(e)}var g=function(){function t(e,n){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),_(this,"_showInputError",(function(t,e){var n=r._form.querySelector("".concat(r.config.errorClassTemplate).concat(t.name));t.classList.add(r.config.errorClass),n.textContent=e,n.classList.add(r.config.activeErrorClass)})),_(this,"_hideInputError",(function(t){var e=r._form.querySelector("".concat(r.config.errorClassTemplate).concat(t.name));t.classList.remove(r.config.errorClass),e.classList.remove(r.config.activeErrorClass),e.textContent=""})),_(this,"clearInputErrors",(function(){r._inputList.forEach((function(t){r._hideInputError(t)}))})),this.config=e,this._form=n,this._inputList=Array.from(this._form.querySelectorAll(this.config.inputSelector)),this._submitButton=this._form.querySelector(this.config.submitButtonSelector)}var e,n;return e=t,(n=[{key:"disableButton",value:function(){this._submitButton.classList.remove(this.config.validSubmitButtonClass),this._submitButton.disabled=!0}},{key:"_enableButton",value:function(){this._submitButton.classList.add(this.config.validSubmitButtonClass),this._submitButton.disabled=!1}},{key:"_checkInputValidation",value:function(t){t.validity.valid?(t.classList.remove(this.config.errorClass),this._hideInputError(t)):this._showInputError(t,t.validationMessage,this.config)}},{key:"_hasInvalidInput",value:function(){return Array.from(this._inputList).some((function(t){return!t.validity.valid}))}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput(this._inputList)?this.disableButton():this._enableButton()}},{key:"_setEventListeners",value:function(){var t=this;this._inputList.forEach((function(e){e.addEventListener("input",(function(){t._checkInputValidation(e),t._toggleButtonState()}))}))}},{key:"enableValidation",value:function(){var t=this;this._inputList.forEach((function(){t._setEventListeners(),t._form.addEventListener("reset",(function(){t.disableButton()}))}))}}])&&v(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function w(t){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}function k(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,E(r.key),r)}}function E(t){var e=function(t,e){if("object"!==w(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===w(e)?e:String(e)}var j=function(){function t(e){var n,r,o,i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=function(t){"Escape"===t.key&&i.close()},(r=E(r="_handleEscClose"))in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,this._popup=document.querySelector(e)}var e,n;return e=t,(n=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),window.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),window.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){var t=this;this._popup.addEventListener("click",(function(e){(e.target.classList.contains("popup_opened")||e.target.classList.contains("popup__button-closed"))&&t.close()}))}}])&&k(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function O(t){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},O(t)}function L(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==O(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==O(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===O(o)?o:String(o)),r)}var o}function P(){return P="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=q(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},P.apply(this,arguments)}function C(t,e){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},C(t,e)}function q(t){return q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},q(t)}var I=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&C(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=q(r);if(o){var n=q(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===O(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=i.call(this,t))._imageElement=e._popup.querySelector(".popup__image"),e._imageCaption=e._popup.querySelector(".popup__caption"),e}return e=u,(n=[{key:"open",value:function(t){this._imageElement.src=t.link,this._imageElement.alt=t.name,this._imageCaption.textContent=t.name,P(q(u.prototype),"open",this).call(this)}}])&&L(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(j);function T(t){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},T(t)}function R(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==T(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==T(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===T(o)?o:String(o)),r)}var o}function B(){return B="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=U(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},B.apply(this,arguments)}function A(t,e){return A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},A(t,e)}function U(t){return U=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},U(t)}var x=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&A(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=U(r);if(o){var n=U(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===T(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,t))._form=n._popup.querySelector(".popup__inputs"),n._handleFormSubmit=e,n._inputList=Array.from(n._popup.querySelectorAll(".popup__item")),n}return e=u,(n=[{key:"_getInputValues",value:function(){var t={};return this._inputList.forEach((function(e){var n=e.value,r=e.name;t[r]=n})),t}},{key:"setEventListeners",value:function(){var t=this;B(U(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(e){e.preventDefault();var n=t._getInputValues();t._handleFormSubmit(n),t._form.querySelector(".popup__button").textContent="Сохранить",t.close()}))}},{key:"close",value:function(){this._form.reset(),B(U(u.prototype),"close",this).call(this)}}])&&R(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(j);function D(t){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},D(t)}function N(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==D(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==D(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===D(o)?o:String(o)),r)}var o}var V=function(){function t(e){var n=e.name,r=e.about,o=e.avatar;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._userNameElement=document.querySelector(n),this._userAboutMeElement=document.querySelector(r),this._avatar=document.querySelector(o)}var e,n;return e=t,(n=[{key:"getUserInfo",value:function(){return{name:this._userNameElement.textContent,about:this._userAboutMeElement.textContent,avatar:this._avatar.src}}},{key:"setUserInfo",value:function(t){var e=t.name,n=t.about,r=t.avatar;this._userNameElement.textContent=e,this._userAboutMeElement.textContent=n,this._avatar.src=r}}])&&N(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function M(t){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},M(t)}function F(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==M(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==M(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===M(o)?o:String(o)),r)}var o}function J(){return J="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=z(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},J.apply(this,arguments)}function H(t,e){return H=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},H(t,e)}function z(t){return z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},z(t)}var $=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&H(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=z(r);if(o){var n=z(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===M(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,t))._form=n._popup.querySelector(".popup__inputs"),n._cardId=e,n}return e=u,(n=[{key:"setSubmitAction",value:function(t){this._handleFormSubmit=t}},{key:"setEventListeners",value:function(){var t=this;J(z(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(e){e.preventDefault(),t.close()}))}}])&&F(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(j);function G(t){return G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},G(t)}function K(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==G(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==G(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===G(o)?o:String(o)),r)}var o}function Q(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var W,X=new(function(){function t(e){var n=e.baseUrl,r=e.headers;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._baseUrl=n,this._headers=r}var e,n;return e=t,(n=[{key:"_respond",value:function(t){return t.ok?t.json():Promise.reject("Ошибка ".concat(t.status))}},{key:"getUser",value:function(){var t=this;return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers}).then((function(e){return t._respond(e)}))}},{key:"getInitialCards",value:function(){var t=this;return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers}).then((function(e){return t._respond(e)}))}},{key:"editUserInfo",value:function(t,e){var n=this;return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:e})}).then((function(t){return n._respond(t)}))}},{key:"addNewCard",value:function(t,e){var n=this;return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:e})}).then((function(t){return n._respond(t)}))}},{key:"deleteCard",value:function(t){var e=this;return fetch("".concat(this._baseUrl,"/cards/").concat(t),{method:"DELETE",headers:this._headers}).then((function(t){return e._respond(t)}))}},{key:"setLike",value:function(t){var e=this;return fetch("".concat(this._baseUrl,"/cards/").concat(t,"/likes"),{method:"PUT",headers:this._headers}).then((function(t){return e._respond(t)}))}},{key:"deleteLike",value:function(t){var e=this;return fetch("".concat(this._baseUrl,"/cards/").concat(t,"/likes"),{method:"DELETE",headers:this._headers}).then((function(t){return e._respond(t)}))}},{key:"changeAvatar",value:function(t){var e=this;return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:t})}).then((function(t){return e._respond(t)}))}}])&&K(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}())({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-65",headers:{authorization:"6f02116a-e75d-4412-8aed-af12499c9bd8","Content-Type":"application/json"}});Promise.all([X.getUser(),X.getInitialCards()]).then((function(t){var e,n,r=(n=2,function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,u,a=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(l)throw o}}return a}}(e,n)||function(t,e){if(t){if("string"==typeof t)return Q(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Q(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];W=o._id,tt.setUserInfo(o),it.renderItems(i.reverse())})).catch((function(t){console.log("Ошибка ".concat(t.status))}));var Y=new I(".popup_type_image"),Z=new $(".popup_type_submit"),tt=new V({name:".profile__name",about:".profile__occupation",avatar:".profile__avatar"}),et=new x(".popup_type_avatar",(function(t){X.changeAvatar(t.avatar).then((function(t){tt.setUserInfo(t)})).catch((function(t){console.log("Ошибка ".concat(t.status))})).finally((function(){spinner.textContent="Сохранение..."}))})),nt=new x(".popup_type_edit",(function(t){X.editUserInfo(t.name,t.about).then((function(t){tt.setUserInfo(t)})).catch((function(t){console.log("Ошибка ".concat(t.status))})).finally((function(){spinner.textContent="Сохранение..."}))})),rt=new x(".popup_type_add",(function(t){X.addNewCard(t.name,t.link).then((function(t){var e=ot(t,W);it.addItem(e)})).catch((function(t){console.log("Ошибка ".concat(t.status))})).finally((function(){spinner.textContent="Сохранение..."}))})),ot=function(t){var e=new y({data:t,handleCardClick:function(t){Y.open(t)},handleDeleteClick:function(t){Z.setSubmitAction(),X.deleteCard(t.cardId).then((function(e){t.delete(e)})).catch((function(t){console.log("Ошибка ".concat(t.status))})),Z.open()},handleLikeClick:function(t){t.isLiked()?X.deleteLike(t.cardId).then((function(e){t.deleteLike(e.likes)})).catch((function(t){console.log("Ошибка ".concat(t.status))})):X.setLike(t.cardId).then((function(e){t.setLike(e.likes)})).catch((function(t){console.log("Ошибка ".concat(t.status))}))}},W,".element__template");return e.generateCard()},it=new h({renderer:function(t){it.addItem(ot(t))}},".elements__list"),ut=new g(s,e),at=new g(s,n),ct=new g(s,o);ut.enableValidation(),at.enableValidation(),ct.enableValidation(),Y.setEventListeners(),nt.setEventListeners(),rt.setEventListeners(),et.setEventListeners(),Z.setEventListeners(),l.addEventListener("click",(function(){ct.clearInputErrors(),ct.disableButton(),et.open()})),t.addEventListener("click",(function(){var t=tt.getUserInfo();u.value=t.name,a.value=t.about,ut.clearInputErrors(),nt.open()})),c.addEventListener("click",(function(){at.clearInputErrors(),at.disableButton(),rt.open()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QWlCLFNBQVMsV0FDM0MsSUFBTWtKLEVBQWtCbkMsR0FBZ0JvQyxjQUV2Q3JNLEVBQVVzQyxNQUFROEosRUFBZ0J6SyxLQUNsQzFCLEVBQVNxQyxNQUFROEosRUFBZ0IxRSxNQUVqQ29FLEdBQTJCSyxtQkFFM0JuQixHQUFxQlEsTUFDdkIsSUFFQXRMLEVBQWlCZ0QsaUJBQWlCLFNBQVMsV0FDekM2SSxHQUF5QkksbUJBQ3pCSixHQUF5QnZHLGdCQUV6QjBGLEdBQW1CTSxNQUNyQixHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvdXRpbHMvZGF0YS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHByb2ZpbGVFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2VkaXQtYnV0dG9uJyk7XG5jb25zdCBwcm9maWxlUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfdHlwZV9lZGl0Jyk7XG5jb25zdCBwbGFjZVBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX3R5cGVfYWRkJyk7XG5jb25zdCBpbWFnZVBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX3R5cGVfaW1hZ2UnKTtcbmNvbnN0IGF2YXRhclBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX3R5cGVfYXZhdGFyJyk7XG5jb25zdCBjYXJkVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fdGVtcGxhdGUnKTtcbmNvbnN0IHBvcHVwRWRpdENsb3NlQnV0dG9uID0gcHJvZmlsZVBvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fYnV0dG9uLWNsb3NlZCcpO1xuY29uc3QgcG9wdXBBZGRDbG9zZUJ1dHRvbiA9IHBsYWNlUG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19idXR0b24tY2xvc2VkJyk7XG5jb25zdCBwb3B1cENsb3NlQnV0dG9uTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cF9fYnV0dG9uLWNsb3NlZCcpO1xuY29uc3QgcG9wdXBJbWFnZUNsb3NlQnV0dG9uID0gaW1hZ2VQb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2J1dHRvbi1jbG9zZWQnKTtcbmNvbnN0IHByb2ZpbGVGb3JtRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRzX3BsYWNlZF9wcm9maWxlJyk7XG5jb25zdCBwbGFjZUZvcm1FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbnB1dHNfcGxhY2VkX2VsZW1lbnRzJyk7XG5jb25zdCB1c2VyTmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fbmFtZScpO1xuY29uc3QgdXNlckFib3V0TWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX29jY3VwYXRpb24nKTtcbmNvbnN0IHVzZXJBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYXZhdGFyJyk7XG5jb25zdCBhdmF0YXJJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faXRlbV90eXBlX2F2YXRhcicpO1xuY29uc3QgbmFtZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pdGVtX3R5cGVfbmFtZScpO1xuY29uc3Qgam9iSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2l0ZW1fdHlwZV9hYm91dCcpO1xuY29uc3QgdGl0bGVJbnB1dCA9IHBsYWNlRm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pdGVtX3R5cGVfcGxhY2UnKTtcbmNvbnN0IGxpbmtJbnB1dCA9IHBsYWNlRm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pdGVtX3R5cGVfbGluaycpO1xuY29uc3QgcHJvZmlsZUFkZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hZGQtYnV0dG9uJyk7XG5jb25zdCBjYXJkc0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50c19fbGlzdCcpO1xuY29uc3QgaW1hZ2VFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbWFnZScpO1xuY29uc3QgaW1hZ2VDYXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19jYXB0aW9uJyk7XG5jb25zdCBwb3B1cExpc3QgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cCcpKTtcbmNvbnN0IHBvcHVwQXZhdGFyQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2F2YXRhci1idXR0b24nKTtcblxuY29uc3QgY29uZmlnID0ge1xuICBmb3JtU2VsZWN0b3I6ICcucG9wdXBfX2lucHV0cycsXG4gIGlucHV0U2VsZWN0b3I6ICcucG9wdXBfX2l0ZW0nLFxuICBlcnJvckNsYXNzVGVtcGxhdGU6ICcucG9wdXBfX2l0ZW0tZXJyb3JfdHlwZV8nLFxuICBhY3RpdmVFcnJvckNsYXNzOiAncG9wdXBfX2lucHV0LWVycm9yJyxcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6ICcucG9wdXBfX2J1dHRvbicsXG4gIHZhbGlkU3VibWl0QnV0dG9uQ2xhc3M6ICdwb3B1cF9fYnV0dG9uX3ZhbGlkJyxcbiAgZXJyb3JDbGFzczogJ3BvcHVwX19pdGVtLXVuZGVybGluZSdcbn07XG5cbmV4cG9ydCB7IHByb2ZpbGVFZGl0QnV0dG9uLCBwcm9maWxlUG9wdXAsIHBsYWNlUG9wdXAsIGltYWdlUG9wdXAsIGF2YXRhclBvcHVwLCBjYXJkVGVtcGxhdGUsIHBvcHVwRWRpdENsb3NlQnV0dG9uLCBwb3B1cEFkZENsb3NlQnV0dG9uLCBwb3B1cENsb3NlQnV0dG9uTGlzdCwgcG9wdXBJbWFnZUNsb3NlQnV0dG9uLCBwcm9maWxlRm9ybUVsZW1lbnQsIHBsYWNlRm9ybUVsZW1lbnQsIHVzZXJOYW1lRWxlbWVudCwgdXNlckFib3V0TWVFbGVtZW50LCB1c2VyQXZhdGFyLCBhdmF0YXJJbnB1dCwgbmFtZUlucHV0LCBqb2JJbnB1dCwgdGl0bGVJbnB1dCwgbGlua0lucHV0LCBwcm9maWxlQWRkQnV0dG9uLCBjYXJkc0NvbnRhaW5lciwgaW1hZ2VFbGVtZW50LCBpbWFnZUNhcHRpb24sIHBvcHVwTGlzdCwgcG9wdXBBdmF0YXJCdXR0b24sIGNvbmZpZyB9XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoIHsgZGF0YSwgaGFuZGxlQ2FyZENsaWNrLCBoYW5kbGVEZWxldGVDbGljaywgaGFuZGxlTGlrZUNsaWNrIH0sIHVzZXJJZCwgdGVtcGxhdGVTZWxlY3Rvcikge1xuICAgIHRoaXMuY2FyZElkID0gZGF0YS5faWQ7XG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xuICAgIHRoaXMubGlrZXMgPSBkYXRhLmxpa2VzO1xuICAgIHRoaXMuX293bmVySWQgPSBkYXRhLm93bmVyLl9pZDtcblxuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcbiAgICB0aGlzLl9oYW5kbGVMaWtlQ2xpY2sgPSBoYW5kbGVMaWtlQ2xpY2s7XG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2sgPSBoYW5kbGVEZWxldGVDbGljaztcblxuICAgIHRoaXMudXNlcklkID0gdXNlcklkO1xuICAgIHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IgPSB0ZW1wbGF0ZVNlbGVjdG9yO1xuICB9XG5cbiAgLy/QvNC10YLQvtC0LCDQutC+0YLQvtGA0YvQuSDQv9C+0LvRg9GH0LDQtdGCINGA0LDQt9C80LXRgtC60YMg0LjQtyDRiNCw0LHQu9C+0L3QsFxuICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fdGVtcGxhdGVTZWxlY3RvcilcbiAgICAgIC5jb250ZW50XG4gICAgICAucXVlcnlTZWxlY3RvcignLmVsZW1lbnQnKVxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcblxuICAgIHJldHVybiBjYXJkRWxlbWVudDtcbiAgfVxuXG4gIC8v0L7QsdGA0LDQsdC+0YLRh9C40LrQuCDQu9Cw0LnQutCwXG4gIHNldExpa2UoKSB7XG4gICAgdGhpcy5fYnV0dG9uTGlrZS5jbGFzc0xpc3QuYWRkKCdlbGVtZW50X19saWtlLWJ1dHRvbl9hY3RpdmUnKTtcbiAgfVxuXG4gIGRlbGV0ZUxpa2UoKSB7XG4gICAgdGhpcy5fYnV0dG9uTGlrZS5jbGFzc0xpc3QucmVtb3ZlKCdlbGVtZW50X19saWtlLWJ1dHRvbl9hY3RpdmUnKTtcbiAgfVxuXG4gIGlzTGlrZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMubGlrZXMuc29tZSgoaXRlbSkgPT4gaXRlbS5faWQgPT09IHRoaXMudXNlcklkKTtcbiAgfVxuXG4gIC8v0L7QsdGA0LDQsdC+0YLRh9C40Log0YPQtNCw0LvQtdC90LjRj1xuICBkZWxldGUoKSB7XG4gICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcbiAgfTtcblxuICAvL9C90LDQutC70LDQtNGL0LLQsNC10YIg0LLRgdC1INC+0LHRgNCw0LHQvtGC0YfQuNC60Lgg0YHQvtCx0YvRgtC40Lkg0L3QsCDQutCw0YDRgtC+0YfQutGDXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9idXR0b25MaWtlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrKHRoaXMpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fYnV0dG9uRGVsZXRlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2sodGhpcyk7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2soe1xuICAgICAgICBuYW1lOiB0aGlzLl9uYW1lLFxuICAgICAgICBsaW5rOiB0aGlzLl9saW5rXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8v0YHQvtC30LTQsNC90LjQtSDQutCw0YDRgtC+0YfQutC4INC00LvRjyDQtNCw0LvRjNC90LXQudGI0LXQuSDQvtGC0YDQuNGB0L7QstC60Lgg0LIg0YDQsNC30LzQtdGC0LrQtVxuICBnZW5lcmF0ZUNhcmQoKSB7XG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XG5cbiAgICAvL9C30LDQs9C+0LvQvtCy0L7QulxuICAgIHRoaXMuX2NhcmRUaXRsZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX3RpdGxlJyk7XG4gICAgdGhpcy5fY2FyZFRpdGxlLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcblxuICAgIC8v0LjQt9C+0LHRgNCw0LbQtdC90LjQtVxuICAgIHRoaXMuX2NhcmRJbWFnZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2ltYWdlJyk7XG4gICAgdGhpcy5fY2FyZEltYWdlLnNyYyA9ICB0aGlzLl9saW5rO1xuICAgIHRoaXMuX2NhcmRJbWFnZS5hbHQgPSBg0KTQvtGC0L7Qs9GA0LDRhNC40Y8gJHt0aGlzLl9uYW1lfWA7XG5cbiAgICAvL9C60L3QvtC/0LrQuFxuICAgIHRoaXMuX2J1dHRvbkxpa2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19saWtlLWJ1dHRvbicpO1xuXG4gICAgLy/RgdGH0ZHRgtGH0LjQuiDQu9Cw0LnQutC+0LJcbiAgICB0aGlzLl9jb3VudGVyTGlrZXMgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19xdWFudGl0eS1saWtlcycpO1xuICAgIHRoaXMuX2NvdW50ZXJMaWtlcy50ZXh0Q29udGVudCA9IHRoaXMubGlrZXMubGVuZ3RoO1xuICAgICAgaWYgKHRoaXMuaXNMaWtlZCgpKSB7XG4gICAgICAgIHRoaXMuc2V0TGlrZSgpO1xuICAgICAgfVxuXG4gICAgdGhpcy5fYnV0dG9uRGVsZXRlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fZGVsZXRlLWJ1dHRvbicpO1xuICAgICAgaWYgKHRoaXMuX293bmVySWQgIT09IHRoaXMudXNlcklkKSB7XG4gICAgICAgIHRoaXMuX2J1dHRvbkRlbGV0ZS5yZW1vdmUoKTtcbiAgICAgIH07XG5cbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XG4gIH07XG59O1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gIC8v0LrQvtC90YHRgtGA0YPQutGC0L7RgCwg0LrQvtGC0L7RgNGL0Lkg0L/RgNC40L3QuNC80LDQtdGCINC00LDQvdC90YvQtSDQutCw0YDRgtC+0YfQutC4INC4INGI0LDQsdC70L7QvSwg0Lgg0YHQvtGF0YDQsNC90Y/QtdGCINGN0YLQuCDQt9C90LDRh9C10L3QuNGPINCyINGB0LLQvtC50YHRgtCy0LDRhVxuICBjb25zdHJ1Y3RvciggeyByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xuICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xuICB9XG5cbiAgLy/QvtGC0YDQuNGB0L7QstC60LAg0LLRgdC10YUg0Y3Qu9C10LzQtdC90YLQvtCyXG4gIHJlbmRlckl0ZW1zKGl0ZW1zKSB7XG4gICAgaXRlbXMuZm9yRWFjaCh0aGlzLl9yZW5kZXJlcik7XG4gIH1cblxuICBhZGRJdGVtKGVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcbiAgfVxufVxuXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdGlvbiB7XG4gIC8v0L/RgNC40L3QuNC80LDQtdGCINCyINC60L7QvdGB0YLRgNGD0LrRgtC+0YAg0L7QsdGK0LXQutGCINC90LDRgdGC0YDQvtC10Log0YEg0YHQtdC70LXQutGC0L7RgNCw0LzQuCDQuCDQutC70LDRgdGB0LDQvNC4INGE0L7RgNC80YssINC/0YDQuNC90LjQvNCw0LXRgiDQstGC0L7RgNGL0Lwg0L/QsNGA0LDQvNC10YLRgNC+0Lwg0Y3Qu9C10LzQtdC90YIg0YLQvtC5INGE0L7RgNC80YssINC60L7RgtC+0YDQsNGPINCy0LDQu9C40LTQuNGA0YPQtdGC0YHRjztcbiAgY29uc3RydWN0b3IoY29uZmlnLCBmb3JtKSB7XG4gICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgIHRoaXMuX2Zvcm0gPSBmb3JtO1xuICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5jb25maWcuaW5wdXRTZWxlY3RvcikpO1xuICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcbiAgfTtcblxuICBfc2hvd0lucHV0RXJyb3IgPSAoaW5wdXQsIHZhbGlkYXRpb25NZXNzYWdlKSA9PiB7XG4gICAgY29uc3QgZXJyb3JUZXh0RWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgJHt0aGlzLmNvbmZpZy5lcnJvckNsYXNzVGVtcGxhdGV9JHtpbnB1dC5uYW1lfWApO1xuICAgIGlucHV0LmNsYXNzTGlzdC5hZGQodGhpcy5jb25maWcuZXJyb3JDbGFzcyk7XG4gICAgZXJyb3JUZXh0RWxlbWVudC50ZXh0Q29udGVudCA9IHZhbGlkYXRpb25NZXNzYWdlO1xuICAgIGVycm9yVGV4dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLmNvbmZpZy5hY3RpdmVFcnJvckNsYXNzKTtcbiAgfTtcblxuICBfaGlkZUlucHV0RXJyb3IgPSAoaW5wdXQpID0+IHtcbiAgICBjb25zdCBlcnJvclRleHRFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAke3RoaXMuY29uZmlnLmVycm9yQ2xhc3NUZW1wbGF0ZX0ke2lucHV0Lm5hbWV9YCk7XG4gICAgaW5wdXQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLmNvbmZpZy5lcnJvckNsYXNzKTtcbiAgICBlcnJvclRleHRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5jb25maWcuYWN0aXZlRXJyb3JDbGFzcyk7XG4gICAgZXJyb3JUZXh0RWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xuICB9O1xuXG4gIGNsZWFySW5wdXRFcnJvcnMgPSAoKSA9PiB7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dCk7XG4gICAgfSk7XG4gIH07XG5cbiAgLy/QuNC30LzQtdC90Y/QtdGCINGB0L7RgdGC0L7Rj9C90LjQtSDQutC90L7Qv9C60Lgg0YHQsNCx0LzQuNGC0LBcbiAgZGlzYWJsZUJ1dHRvbigpIHtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLmNvbmZpZy52YWxpZFN1Ym1pdEJ1dHRvbkNsYXNzKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICB9O1xuXG4gIF9lbmFibGVCdXR0b24oKSB7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5jb25maWcudmFsaWRTdWJtaXRCdXR0b25DbGFzcyk7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gIH07XG5cbiAgLy/QvNC10YLQvtC0INC/0YDQvtCy0LXRgNGP0LXRgiDQstCw0LvQuNC00L3QvtGB0YLRjCDQv9C+0LvRj1xuICBfY2hlY2tJbnB1dFZhbGlkYXRpb24oaW5wdXQpIHtcbiAgICBpZighaW5wdXQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0LCBpbnB1dC52YWxpZGF0aW9uTWVzc2FnZSwgdGhpcy5jb25maWcpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpbnB1dC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuY29uZmlnLmVycm9yQ2xhc3MpO1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXQpO1xuICAgIH07XG4gIH07XG5cbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLl9pbnB1dExpc3QpLnNvbWUoKGlucHV0KSA9PiAhaW5wdXQudmFsaWRpdHkudmFsaWQpO1xuICB9O1xuXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICBpZighdGhpcy5faGFzSW52YWxpZElucHV0KHRoaXMuX2lucHV0TGlzdCkpIHtcbiAgICAgIHRoaXMuX2VuYWJsZUJ1dHRvbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmRpc2FibGVCdXR0b24oKTtcbiAgICB9O1xuICB9O1xuXG4vL9GD0YHRgtCw0L3QsNCy0LvQuNCy0LDQtdGCINCy0YHQtSDQvtCx0YDQsNCx0L7RgtGH0LjQutC4XG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcbiAgICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGF0aW9uKGlucHV0KTtcbiAgICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICAgIH0pO1xuICAgICB9KTtcbiAgfTtcblxuICAvL9Cy0LrQu9GO0YfQsNC10YIg0LLQsNC70LjQtNCw0YbQuNGOINGE0L7RgNC80YtcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoKSA9PiB7XG4gICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuXG4gICAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2V0JywgKCkgPT4ge1xuICAgICAgICB0aGlzLmRpc2FibGVCdXR0b24oKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xufTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IgKHBvcHVwU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gIH1cblxuICBvcGVuKCkge1xuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoJ3BvcHVwX29wZW5lZCcpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXBfb3BlbmVkJyk7XG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBfaGFuZGxlRXNjQ2xvc2UgPSAoZXZ0KSA9PiB7XG4gICAgICBpZiAoZXZ0LmtleSA9PT0gJ0VzY2FwZScpIHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH07XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQpID0+IHtcbiAgICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfb3BlbmVkJykgfHwgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwX19idXR0b24tY2xvc2VkJykpXG4gICAgICB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cbiAgICB9KVxuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cC5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG5cbiAgICB0aGlzLl9pbWFnZUVsZW1lbnQgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2ltYWdlJyk7XG4gICAgdGhpcy5faW1hZ2VDYXB0aW9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19jYXB0aW9uJyk7XG4gIH1cblxuICBvcGVuKGRhdGEpIHtcbiAgICB0aGlzLl9pbWFnZUVsZW1lbnQuc3JjID0gZGF0YS5saW5rO1xuICAgIHRoaXMuX2ltYWdlRWxlbWVudC5hbHQgPSBkYXRhLm5hbWU7XG4gICAgdGhpcy5faW1hZ2VDYXB0aW9uLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgfVxuXG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuXG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRzJyk7XG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yQWxsKCcucG9wdXBfX2l0ZW0nKSk7XG4gIH1cblxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgY29uc3QgZm9ybVZhbHVlcyA9IHt9O1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKGlucHV0ID0+IHtcbiAgICAgIGNvbnN0IHZhbHVlID0gaW5wdXQudmFsdWU7XG4gICAgICBjb25zdCBuYW1lID0gaW5wdXQubmFtZTtcblxuICAgICAgZm9ybVZhbHVlc1tuYW1lXSA9IHZhbHVlO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGZvcm1WYWx1ZXM7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB0aGlzLl9nZXRJbnB1dFZhbHVlcygpO1xuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdChpbnB1dFZhbHVlcyk7XG5cbiAgICAgIGNvbnN0IHNwaW5uZXIgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fYnV0dG9uJyk7XG4gICAgICBzcGlubmVyLnRleHRDb250ZW50ID0gJ9Ch0L7RhdGA0LDQvdC40YLRjCdcblxuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0pXG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3Rvcih7IG5hbWUsIGFib3V0LCBhdmF0YXIgfSkge1xuICAgIHRoaXMuX3VzZXJOYW1lRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZSk7XG4gICAgdGhpcy5fdXNlckFib3V0TWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhYm91dCk7XG4gICAgdGhpcy5fYXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhdmF0YXIpO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IHRoaXMuX3VzZXJOYW1lRWxlbWVudC50ZXh0Q29udGVudCxcbiAgICAgIGFib3V0OiB0aGlzLl91c2VyQWJvdXRNZUVsZW1lbnQudGV4dENvbnRlbnQsXG4gICAgICBhdmF0YXI6IHRoaXMuX2F2YXRhci5zcmNcbiAgICB9XG4gIH1cblxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGFib3V0LCBhdmF0YXIgfSkge1xuICAgIHRoaXMuX3VzZXJOYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgdGhpcy5fdXNlckFib3V0TWVFbGVtZW50LnRleHRDb250ZW50ID0gYWJvdXQ7XG4gICAgdGhpcy5fYXZhdGFyLnNyYyA9IGF2YXRhcjtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gJy4vUG9wdXAuanMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhDb25maXJtYXRpb25qc2pzIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBjYXJkSWQpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcblxuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2lucHV0cycpO1xuICAgIHRoaXMuX2NhcmRJZCA9IGNhcmRJZDtcbiAgfVxuXG4gIHNldFN1Ym1pdEFjdGlvbihhY3Rpb24pIHtcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gYWN0aW9uXG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9KTtcbiAgfTtcbn1cbiIsImltcG9ydCAnLi9pbmRleC5jc3MnO1xuXG5pbXBvcnQgeyBwcm9maWxlRWRpdEJ1dHRvbiwgcHJvZmlsZVBvcHVwLCBwbGFjZVBvcHVwLCBhdmF0YXJQb3B1cCwgbmFtZUlucHV0LCBqb2JJbnB1dCwgcHJvZmlsZUFkZEJ1dHRvbiwgcG9wdXBBdmF0YXJCdXR0b24sIGNvbmZpZyB9IGZyb20nLi4vdXRpbHMvZGF0YS5qcyc7XG5pbXBvcnQgQ2FyZCBmcm9tICcuLi9jb21wb25lbnRzL0NhcmQuanMnO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSAnLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzJztcbmltcG9ydCBGb3JtVmFsaWRhdGlvbiBmcm9tICcuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0aW9uLmpzJztcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzJztcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyc7XG5pbXBvcnQgVXNlckluZm8gZnJvbSAnLi4vY29tcG9uZW50cy9Vc2VySW5mby5qcyc7XG5pbXBvcnQgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzJztcbmltcG9ydCBBcGkgZnJvbSAnLi4vY29tcG9uZW50cy9BcGknO1xuXG5cblxuXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcbiAgYmFzZVVybDogJ2h0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtNjUnLFxuICBoZWFkZXJzOiB7XG4gICAgYXV0aG9yaXphdGlvbjogJzZmMDIxMTZhLWU3NWQtNDQxMi04YWVkLWFmMTI0OTljOWJkOCcsXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgfVxufSk7XG5cbmxldCB1c2VySWQ7XG5cblByb21pc2UuYWxsKFthcGkuZ2V0VXNlcigpLCBhcGkuZ2V0SW5pdGlhbENhcmRzKCldKVxuICAudGhlbigoW3VzZXJJbmZvLCBjYXJkc10pID0+IHtcbiAgICB1c2VySWQgPSB1c2VySW5mby5faWQ7XG4gICAgdXNlckluZm9FbGVtZW50LnNldFVzZXJJbmZvKHVzZXJJbmZvKTtcbiAgICBzZWN0aW9uLnJlbmRlckl0ZW1zKGNhcmRzLnJldmVyc2UoKSlcbiAgICB9KVxuIC5jYXRjaCgocmVzKSA9PiB7XG4gICAgY29uc29sZS5sb2coYNCe0YjQuNCx0LrQsCAke3Jlcy5zdGF0dXN9YClcbiAgfSlcblxuY29uc3QgcG9wdXBXaXRoSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoJy5wb3B1cF90eXBlX2ltYWdlJyk7XG5cbmNvbnN0IHBvcHVwV2l0aFN1Ym1pdCA9IG5ldyBQb3B1cFdpdGhDb25maXJtYXRpb24oJy5wb3B1cF90eXBlX3N1Ym1pdCcpO1xuY29uc3QgdXNlckluZm9FbGVtZW50ID0gbmV3IFVzZXJJbmZvKHtcbiAgbmFtZTogJy5wcm9maWxlX19uYW1lJyxcbiAgYWJvdXQ6ICcucHJvZmlsZV9fb2NjdXBhdGlvbicsXG4gIGF2YXRhcjogJy5wcm9maWxlX19hdmF0YXInXG59KTtcbmNvbnN0IHBvcHVwV2l0aEF2YXRhciA9IG5ldyBQb3B1cFdpdGhGb3JtKFxuICAnLnBvcHVwX3R5cGVfYXZhdGFyJyxcbiAgKGRhdGEpID0+IHtcbiAgICBhcGkuY2hhbmdlQXZhdGFyKGRhdGEuYXZhdGFyKVxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICB1c2VySW5mb0VsZW1lbnQuc2V0VXNlckluZm8ocmVzKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKHJlcykgPT4ge1xuICAgICAgICAgY29uc29sZS5sb2coYNCe0YjQuNCx0LrQsCAke3Jlcy5zdGF0dXN9YClcbiAgICAgIH0pXG4gICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgIHNwaW5uZXIudGV4dENvbnRlbnQgPSAn0KHQvtGF0YDQsNC90LXQvdC40LUuLi4nXG4gICAgICB9KVxuICB9KTtcblxuY29uc3QgcHJvZmlsZVBvcHVwV2l0aEZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgJy5wb3B1cF90eXBlX2VkaXQnLFxuICAoZGF0YSkgPT4ge1xuICAgIGFwaS5lZGl0VXNlckluZm8oZGF0YS5uYW1lLCBkYXRhLmFib3V0KVxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICB1c2VySW5mb0VsZW1lbnQuc2V0VXNlckluZm8ocmVzKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKHJlcykgPT4ge1xuICAgICAgICAgY29uc29sZS5sb2coYNCe0YjQuNCx0LrQsCAke3Jlcy5zdGF0dXN9YClcbiAgICAgfSlcbiAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgc3Bpbm5lci50ZXh0Q29udGVudCA9ICfQodC+0YXRgNCw0L3QtdC90LjQtS4uLidcbiAgICB9KVxufSk7XG5cbmNvbnN0IHBsYWNlUG9wdXBXaXRoRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKFxuICAnLnBvcHVwX3R5cGVfYWRkJyxcbiAgKGRhdGEpID0+IHtcbiAgICBhcGkuYWRkTmV3Q2FyZChkYXRhLm5hbWUsIGRhdGEubGluaylcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjcmVhdGVDYXJkKHJlcywgdXNlcklkKTtcbiAgICAgICAgc2VjdGlvbi5hZGRJdGVtKGNhcmRFbGVtZW50KTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKHJlcykgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhg0J7RiNC40LHQutCwICR7cmVzLnN0YXR1c31gKTtcbiAgICAgIH0pXG4gICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgIHNwaW5uZXIudGV4dENvbnRlbnQgPSAn0KHQvtGF0YDQsNC90LXQvdC40LUuLi4nXG4gICAgICB9KVxufSk7XG5cbmNvbnN0IGNyZWF0ZUNhcmQgPSAoZGF0YSkgPT4ge1xuICBjb25zdCBjYXJkID0gbmV3IENhcmQgKHtcbiAgICBkYXRhLFxuICAgIGhhbmRsZUNhcmRDbGljazogKGRhdGEpID0+IHtcbiAgICAgIHBvcHVwV2l0aEltYWdlLm9wZW4oZGF0YSk7XG4gICAgfSxcbiAgICBoYW5kbGVEZWxldGVDbGljazogKGNhcmQpID0+IHtcbiAgICAgIHBvcHVwV2l0aFN1Ym1pdC5zZXRTdWJtaXRBY3Rpb24oKTtcbiAgICAgIGFwaS5kZWxldGVDYXJkKGNhcmQuY2FyZElkKVxuICAgICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgICAgY2FyZC5kZWxldGUocmVzKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChyZXMpID0+IHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhg0J7RiNC40LHQutCwICR7cmVzLnN0YXR1c31gKTtcbiAgICAgICAgfSk7XG4gICAgICAgICAgcG9wdXBXaXRoU3VibWl0Lm9wZW4oKTtcbiAgICAgICAgfSxcbiAgICBoYW5kbGVMaWtlQ2xpY2s6IChjYXJkKSA9PiB7XG4gICAgICBpZiAoY2FyZC5pc0xpa2VkKCkpIHtcbiAgICAgICAgYXBpLmRlbGV0ZUxpa2UoY2FyZC5jYXJkSWQpXG4gICAgICAgICAgLnRoZW4gKChyZXMpID0+IHtcbiAgICAgICAgICAgIGNhcmQuZGVsZXRlTGlrZShyZXMubGlrZXMpO1xuICAgICAgICAgfSlcbiAgICAgICAgICAuY2F0Y2goKHJlcykgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coYNCe0YjQuNCx0LrQsCAke3Jlcy5zdGF0dXN9YCk7XG4gICAgICAgICAgfSlcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXBpLnNldExpa2UoY2FyZC5jYXJkSWQpXG4gICAgICAgICAgICAudGhlbiAoKHJlcykgPT4ge1xuICAgICAgICAgICAgICBjYXJkLnNldExpa2UocmVzLmxpa2VzKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goKHJlcykgPT4ge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhg0J7RiNC40LHQutCwICR7cmVzLnN0YXR1c31gKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgdXNlcklkLFxuICAgICAgJy5lbGVtZW50X190ZW1wbGF0ZSdcbiAgICAgICk7XG4gICAgICByZXR1cm4gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcbn07XG5cbiAgICBjb25zdCBzZWN0aW9uID0gbmV3IFNlY3Rpb24gKHtcbiAgICAgIHJlbmRlcmVyOiAoZGF0YSkgPT4ge1xuICAgICAgICBzZWN0aW9uLmFkZEl0ZW0oY3JlYXRlQ2FyZChkYXRhKSk7XG4gICAgICB9fSxcbiAgICAnLmVsZW1lbnRzX19saXN0Jyk7XG5cblxuY29uc3QgZm9ybVZhbGlkYXRpb25Qcm9maWxlUG9wdXAgPSBuZXcgRm9ybVZhbGlkYXRpb24oY29uZmlnLCBwcm9maWxlUG9wdXApO1xuY29uc3QgZm9ybVZhbGlkYXRpb25QbGFjZVBvcHVwID0gbmV3IEZvcm1WYWxpZGF0aW9uKGNvbmZpZywgcGxhY2VQb3B1cCk7XG5jb25zdCBmb3JtVmFsaWRhdGlvbkF2YXRhclBvcHVwID0gbmV3IEZvcm1WYWxpZGF0aW9uKGNvbmZpZywgYXZhdGFyUG9wdXApO1xuXG5mb3JtVmFsaWRhdGlvblByb2ZpbGVQb3B1cC5lbmFibGVWYWxpZGF0aW9uKCk7XG5mb3JtVmFsaWRhdGlvblBsYWNlUG9wdXAuZW5hYmxlVmFsaWRhdGlvbigpO1xuZm9ybVZhbGlkYXRpb25BdmF0YXJQb3B1cC5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbnBvcHVwV2l0aEltYWdlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5wcm9maWxlUG9wdXBXaXRoRm9ybS5zZXRFdmVudExpc3RlbmVycygpO1xucGxhY2VQb3B1cFdpdGhGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5wb3B1cFdpdGhBdmF0YXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbnBvcHVwV2l0aFN1Ym1pdC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5wb3B1cEF2YXRhckJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgZm9ybVZhbGlkYXRpb25BdmF0YXJQb3B1cC5jbGVhcklucHV0RXJyb3JzKCk7XG4gIGZvcm1WYWxpZGF0aW9uQXZhdGFyUG9wdXAuZGlzYWJsZUJ1dHRvbigpO1xuXG4gIHBvcHVwV2l0aEF2YXRhci5vcGVuKCk7XG59KTtcblxucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gY29uc3QgcHJvZmlsZVVzZXJJbmZvID0gdXNlckluZm9FbGVtZW50LmdldFVzZXJJbmZvKCk7XG5cbiAgbmFtZUlucHV0LnZhbHVlID0gcHJvZmlsZVVzZXJJbmZvLm5hbWU7XG4gIGpvYklucHV0LnZhbHVlID0gcHJvZmlsZVVzZXJJbmZvLmFib3V0O1xuXG4gIGZvcm1WYWxpZGF0aW9uUHJvZmlsZVBvcHVwLmNsZWFySW5wdXRFcnJvcnMoKTtcblxuICBwcm9maWxlUG9wdXBXaXRoRm9ybS5vcGVuKCk7XG59KTtcblxucHJvZmlsZUFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgZm9ybVZhbGlkYXRpb25QbGFjZVBvcHVwLmNsZWFySW5wdXRFcnJvcnMoKTtcbiAgZm9ybVZhbGlkYXRpb25QbGFjZVBvcHVwLmRpc2FibGVCdXR0b24oKTtcblxuICBwbGFjZVBvcHVwV2l0aEZvcm0ub3BlbigpO1xufSk7XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xuICBjb25zdHJ1Y3Rvcih7IGJhc2VVcmwsIGhlYWRlcnMgfSkge1xuICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDtcbiAgdGhpcy5faGVhZGVycyA9IGhlYWRlcnM7XG4gIH1cblxuICBfcmVzcG9uZChyZXMpIHtcbiAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LAgJHtyZXMuc3RhdHVzfWApO1xuICAgIH1cbiAgfVxuXG4gIGdldFVzZXIoKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xuICAgIH0pXG4gICAgLnRoZW4oKHJlcykgPT4gdGhpcy5fcmVzcG9uZChyZXMpKTtcbiAgfVxuXG4gIGdldEluaXRpYWxDYXJkcygpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXG4gICAgfSlcbiAgICAudGhlbigocmVzKSA9PiB0aGlzLl9yZXNwb25kKHJlcykpO1xuICB9XG5cbiAgZWRpdFVzZXJJbmZvKCBuYW1lLCBhYm91dCApIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XG4gICAgICBtZXRob2Q6ICdQQVRDSCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgbmFtZSxcbiAgICAgIGFib3V0XG4gICAgICB9KVxuICAgIH0pXG4gICAgLnRoZW4oKHJlcykgPT4gdGhpcy5fcmVzcG9uZChyZXMpKTtcbiAgfVxuXG4gIGFkZE5ld0NhcmQoIG5hbWUsIGxpbmsgKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWUsXG4gICAgICAgIGxpbmtcbiAgICAgIH0pXG4gICAgfSlcbiAgICAudGhlbigocmVzKSA9PiB0aGlzLl9yZXNwb25kKHJlcykpO1xuICB9XG5cbiAgZGVsZXRlQ2FyZCggY2FyZElkICkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH1gLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXG4gICAgfSlcbiAgICAudGhlbigocmVzKSA9PiB0aGlzLl9yZXNwb25kKHJlcykpO1xuICB9XG5cbiAgc2V0TGlrZSggY2FyZElkICkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XG4gICAgICBtZXRob2Q6ICdQVVQnLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xuICAgIH0pXG4gICAgLnRoZW4oKHJlcykgPT4gdGhpcy5fcmVzcG9uZChyZXMpKTtcbiAgfVxuXG4gIGRlbGV0ZUxpa2UoIGNhcmRJZCApIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwge1xuICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcbiAgICB9KVxuICAgIC50aGVuKChyZXMpID0+IHRoaXMuX3Jlc3BvbmQocmVzKSk7XG4gIH1cblxuICBjaGFuZ2VBdmF0YXIoIGF2YXRhciApIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xuICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgYXZhdGFyXG4gICAgICB9KVxuICAgIH0pXG4gICAgLnRoZW4oKHJlcykgPT4gdGhpcy5fcmVzcG9uZChyZXMpKTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsicHJvZmlsZUVkaXRCdXR0b24iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJwcm9maWxlUG9wdXAiLCJwbGFjZVBvcHVwIiwiaW1hZ2VQb3B1cCIsImF2YXRhclBvcHVwIiwicGxhY2VGb3JtRWxlbWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJuYW1lSW5wdXQiLCJqb2JJbnB1dCIsInByb2ZpbGVBZGRCdXR0b24iLCJwb3B1cEF2YXRhckJ1dHRvbiIsIkFycmF5IiwiZnJvbSIsImNvbmZpZyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJlcnJvckNsYXNzVGVtcGxhdGUiLCJhY3RpdmVFcnJvckNsYXNzIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJ2YWxpZFN1Ym1pdEJ1dHRvbkNsYXNzIiwiZXJyb3JDbGFzcyIsIkNhcmQiLCJfcmVmIiwidXNlcklkIiwidGVtcGxhdGVTZWxlY3RvciIsImRhdGEiLCJoYW5kbGVDYXJkQ2xpY2siLCJoYW5kbGVEZWxldGVDbGljayIsImhhbmRsZUxpa2VDbGljayIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJjYXJkSWQiLCJfaWQiLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJsaWtlcyIsIl9vd25lcklkIiwib3duZXIiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2hhbmRsZUxpa2VDbGljayIsIl9oYW5kbGVEZWxldGVDbGljayIsIl90ZW1wbGF0ZVNlbGVjdG9yIiwia2V5IiwidmFsdWUiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2J1dHRvbkxpa2UiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJfdGhpcyIsInNvbWUiLCJpdGVtIiwiX2VsZW1lbnQiLCJfdGhpczIiLCJhZGRFdmVudExpc3RlbmVyIiwiX2J1dHRvbkRlbGV0ZSIsIl9jYXJkSW1hZ2UiLCJfZ2V0VGVtcGxhdGUiLCJfY2FyZFRpdGxlIiwidGV4dENvbnRlbnQiLCJzcmMiLCJhbHQiLCJjb25jYXQiLCJfY291bnRlckxpa2VzIiwibGVuZ3RoIiwiaXNMaWtlZCIsInNldExpa2UiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJyZW5kZXJlciIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJpdGVtcyIsImZvckVhY2giLCJlbGVtZW50IiwicHJlcGVuZCIsIkZvcm1WYWxpZGF0aW9uIiwiZm9ybSIsIl9kZWZpbmVQcm9wZXJ0eSIsImlucHV0IiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJlcnJvclRleHRFbGVtZW50IiwiX2Zvcm0iLCJfaW5wdXRMaXN0IiwiX2hpZGVJbnB1dEVycm9yIiwiX3N1Ym1pdEJ1dHRvbiIsImRpc2FibGVkIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9zaG93SW5wdXRFcnJvciIsIl9oYXNJbnZhbGlkSW5wdXQiLCJkaXNhYmxlQnV0dG9uIiwiX2VuYWJsZUJ1dHRvbiIsIl9jaGVja0lucHV0VmFsaWRhdGlvbiIsIl90b2dnbGVCdXR0b25TdGF0ZSIsIl90aGlzMyIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsImV2dCIsImNsb3NlIiwiX3BvcHVwIiwid2luZG93IiwiX2hhbmRsZUVzY0Nsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInRhcmdldCIsImNvbnRhaW5zIiwiUG9wdXBXaXRoSW1hZ2UiLCJfUG9wdXAiLCJfaW5oZXJpdHMiLCJfc3VwZXIiLCJjYWxsIiwiX2ltYWdlRWxlbWVudCIsIl9pbWFnZUNhcHRpb24iLCJfZ2V0IiwiX2dldFByb3RvdHlwZU9mIiwicHJvdG90eXBlIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsImZvcm1WYWx1ZXMiLCJwcmV2ZW50RGVmYXVsdCIsImlucHV0VmFsdWVzIiwiX2dldElucHV0VmFsdWVzIiwicmVzZXQiLCJVc2VySW5mbyIsImFib3V0IiwiYXZhdGFyIiwiX3VzZXJOYW1lRWxlbWVudCIsIl91c2VyQWJvdXRNZUVsZW1lbnQiLCJfYXZhdGFyIiwiX3JlZjIiLCJQb3B1cFdpdGhDb25maXJtYXRpb25qc2pzIiwiX2NhcmRJZCIsImFjdGlvbiIsImFwaSIsIkFwaSIsImJhc2VVcmwiLCJoZWFkZXJzIiwiX2Jhc2VVcmwiLCJfaGVhZGVycyIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJmZXRjaCIsInRoZW4iLCJfcmVzcG9uZCIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiX3RoaXM0IiwiX3RoaXM1IiwiX3RoaXM2IiwiX3RoaXM3IiwiX3RoaXM4IiwiYXV0aG9yaXphdGlvbiIsImFsbCIsImdldFVzZXIiLCJnZXRJbml0aWFsQ2FyZHMiLCJ1c2VySW5mbyIsImNhcmRzIiwidXNlckluZm9FbGVtZW50Iiwic2V0VXNlckluZm8iLCJzZWN0aW9uIiwicmVuZGVySXRlbXMiLCJyZXZlcnNlIiwiY2F0Y2giLCJjb25zb2xlIiwibG9nIiwicG9wdXBXaXRoSW1hZ2UiLCJwb3B1cFdpdGhTdWJtaXQiLCJQb3B1cFdpdGhDb25maXJtYXRpb24iLCJwb3B1cFdpdGhBdmF0YXIiLCJjaGFuZ2VBdmF0YXIiLCJmaW5hbGx5Iiwic3Bpbm5lciIsInByb2ZpbGVQb3B1cFdpdGhGb3JtIiwiZWRpdFVzZXJJbmZvIiwicGxhY2VQb3B1cFdpdGhGb3JtIiwiYWRkTmV3Q2FyZCIsImNhcmRFbGVtZW50IiwiY3JlYXRlQ2FyZCIsImFkZEl0ZW0iLCJjYXJkIiwib3BlbiIsInNldFN1Ym1pdEFjdGlvbiIsImRlbGV0ZUNhcmQiLCJkZWxldGUiLCJkZWxldGVMaWtlIiwiZ2VuZXJhdGVDYXJkIiwiZm9ybVZhbGlkYXRpb25Qcm9maWxlUG9wdXAiLCJmb3JtVmFsaWRhdGlvblBsYWNlUG9wdXAiLCJmb3JtVmFsaWRhdGlvbkF2YXRhclBvcHVwIiwiZW5hYmxlVmFsaWRhdGlvbiIsInNldEV2ZW50TGlzdGVuZXJzIiwiY2xlYXJJbnB1dEVycm9ycyIsInByb2ZpbGVVc2VySW5mbyIsImdldFVzZXJJbmZvIl0sInNvdXJjZVJvb3QiOiIifQ==